{
    "data": {
        "pagesMDX": {
            "edges": [
                {
                    "node": {
                        "excerpt": "After you set up at least one federation-ready  implementing service , you can configure a  gatewayâ€¦",
                        "id": "bec8092e-e0c6-53fd-8b1b-b287d5f2d180",
                        "fields": {
                            "slug": "/gateway/",
                            "sidebarTitle": "",
                            "apiReference": false
                        },
                        "mdxAST": {
                            "type": "root",
                            "children": [
                                {
                                    "type": "import",
                                    "value": "import {\n  ExpansionPanel,\n} from 'gatsby-theme-apollo-docs/src/components/expansion-panel';",
                                    "position": {
                                        "start": {
                                            "line": 2,
                                            "column": 1,
                                            "offset": 1
                                        },
                                        "end": {
                                            "line": 4,
                                            "column": 66,
                                            "offset": 93
                                        },
                                        "indent": [
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "After you set up at least one federation-ready ",
                                            "position": {
                                                "start": {
                                                    "line": 6,
                                                    "column": 1,
                                                    "offset": 95
                                                },
                                                "end": {
                                                    "line": 6,
                                                    "column": 48,
                                                    "offset": 142
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "link",
                                            "title": null,
                                            "url": "./implementing-services/",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "implementing service",
                                                    "position": {
                                                        "start": {
                                                            "line": 6,
                                                            "column": 49,
                                                            "offset": 143
                                                        },
                                                        "end": {
                                                            "line": 6,
                                                            "column": 69,
                                                            "offset": 163
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 6,
                                                    "column": 48,
                                                    "offset": 142
                                                },
                                                "end": {
                                                    "line": 6,
                                                    "column": 96,
                                                    "offset": 190
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ", you can configure a ",
                                            "position": {
                                                "start": {
                                                    "line": 6,
                                                    "column": 96,
                                                    "offset": 190
                                                },
                                                "end": {
                                                    "line": 6,
                                                    "column": 118,
                                                    "offset": 212
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "strong",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "gateway",
                                                    "position": {
                                                        "start": {
                                                            "line": 6,
                                                            "column": 120,
                                                            "offset": 214
                                                        },
                                                        "end": {
                                                            "line": 6,
                                                            "column": 127,
                                                            "offset": 221
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 6,
                                                    "column": 118,
                                                    "offset": 212
                                                },
                                                "end": {
                                                    "line": 6,
                                                    "column": 129,
                                                    "offset": 223
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " to sit in front of your services. The gateway ",
                                            "position": {
                                                "start": {
                                                    "line": 6,
                                                    "column": 129,
                                                    "offset": 223
                                                },
                                                "end": {
                                                    "line": 6,
                                                    "column": 176,
                                                    "offset": 270
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "strong",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "composes",
                                                    "position": {
                                                        "start": {
                                                            "line": 6,
                                                            "column": 178,
                                                            "offset": 272
                                                        },
                                                        "end": {
                                                            "line": 6,
                                                            "column": 186,
                                                            "offset": 280
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 6,
                                                    "column": 176,
                                                    "offset": 270
                                                },
                                                "end": {
                                                    "line": 6,
                                                    "column": 188,
                                                    "offset": 282
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " the individual schemas of your services into a federated data graph and then executes incoming operations across those services.",
                                            "position": {
                                                "start": {
                                                    "line": 6,
                                                    "column": 188,
                                                    "offset": 282
                                                },
                                                "end": {
                                                    "line": 6,
                                                    "column": 317,
                                                    "offset": 411
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 6,
                                            "column": 1,
                                            "offset": 95
                                        },
                                        "end": {
                                            "line": 6,
                                            "column": 317,
                                            "offset": 411
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "The ",
                                            "position": {
                                                "start": {
                                                    "line": 8,
                                                    "column": 1,
                                                    "offset": 413
                                                },
                                                "end": {
                                                    "line": 8,
                                                    "column": 5,
                                                    "offset": 417
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "@apollo/gateway",
                                            "position": {
                                                "start": {
                                                    "line": 8,
                                                    "column": 5,
                                                    "offset": 417
                                                },
                                                "end": {
                                                    "line": 8,
                                                    "column": 22,
                                                    "offset": 434
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " package extends Apollo Server's functionality, enabling it to act as a gateway for an Apollo Federation architecture.",
                                            "position": {
                                                "start": {
                                                    "line": 8,
                                                    "column": 22,
                                                    "offset": 434
                                                },
                                                "end": {
                                                    "line": 8,
                                                    "column": 140,
                                                    "offset": 552
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 8,
                                            "column": 1,
                                            "offset": 413
                                        },
                                        "end": {
                                            "line": 8,
                                            "column": 140,
                                            "offset": 552
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "blockquote",
                                    "children": [
                                        {
                                            "type": "paragraph",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "We recommend against running your gateway in a serverless environment (such as AWS Lambda), because schema composition increases Apollo Server's startup time. If you do run your gateway in a serverless environment, set your function's timeout to at least 10 seconds to prevent unexpected errors.",
                                                    "position": {
                                                        "start": {
                                                            "line": 10,
                                                            "column": 3,
                                                            "offset": 556
                                                        },
                                                        "end": {
                                                            "line": 10,
                                                            "column": 298,
                                                            "offset": 851
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 10,
                                                    "column": 3,
                                                    "offset": 556
                                                },
                                                "end": {
                                                    "line": 10,
                                                    "column": 298,
                                                    "offset": 851
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 10,
                                            "column": 1,
                                            "offset": 554
                                        },
                                        "end": {
                                            "line": 10,
                                            "column": 298,
                                            "offset": 851
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 2,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Setup",
                                            "position": {
                                                "start": {
                                                    "line": 12,
                                                    "column": 4,
                                                    "offset": 856
                                                },
                                                "end": {
                                                    "line": 12,
                                                    "column": 9,
                                                    "offset": 861
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 12,
                                            "column": 1,
                                            "offset": 853
                                        },
                                        "end": {
                                            "line": 12,
                                            "column": 9,
                                            "offset": 861
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "First, let's install the necessary packages:",
                                            "position": {
                                                "start": {
                                                    "line": 14,
                                                    "column": 1,
                                                    "offset": 863
                                                },
                                                "end": {
                                                    "line": 14,
                                                    "column": 45,
                                                    "offset": 907
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 14,
                                            "column": 1,
                                            "offset": 863
                                        },
                                        "end": {
                                            "line": 14,
                                            "column": 45,
                                            "offset": 907
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "shell",
                                    "meta": null,
                                    "value": "npm install @apollo/gateway apollo-server graphql",
                                    "position": {
                                        "start": {
                                            "line": 16,
                                            "column": 1,
                                            "offset": 909
                                        },
                                        "end": {
                                            "line": 18,
                                            "column": 4,
                                            "offset": 971
                                        },
                                        "indent": [
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "The ",
                                            "position": {
                                                "start": {
                                                    "line": 20,
                                                    "column": 1,
                                                    "offset": 973
                                                },
                                                "end": {
                                                    "line": 20,
                                                    "column": 5,
                                                    "offset": 977
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "@apollo/gateway",
                                            "position": {
                                                "start": {
                                                    "line": 20,
                                                    "column": 5,
                                                    "offset": 977
                                                },
                                                "end": {
                                                    "line": 20,
                                                    "column": 22,
                                                    "offset": 994
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " package includes the ",
                                            "position": {
                                                "start": {
                                                    "line": 20,
                                                    "column": 22,
                                                    "offset": 994
                                                },
                                                "end": {
                                                    "line": 20,
                                                    "column": 44,
                                                    "offset": 1016
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "link",
                                            "title": null,
                                            "url": "/api/apollo-gateway/",
                                            "children": [
                                                {
                                                    "type": "inlineCode",
                                                    "value": "ApolloGateway",
                                                    "position": {
                                                        "start": {
                                                            "line": 20,
                                                            "column": 45,
                                                            "offset": 1017
                                                        },
                                                        "end": {
                                                            "line": 20,
                                                            "column": 60,
                                                            "offset": 1032
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": " class",
                                                    "position": {
                                                        "start": {
                                                            "line": 20,
                                                            "column": 60,
                                                            "offset": 1032
                                                        },
                                                        "end": {
                                                            "line": 20,
                                                            "column": 66,
                                                            "offset": 1038
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 20,
                                                    "column": 44,
                                                    "offset": 1016
                                                },
                                                "end": {
                                                    "line": 20,
                                                    "column": 89,
                                                    "offset": 1061
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ". To configure Apollo Server to act as a gateway, you pass an instance of ",
                                            "position": {
                                                "start": {
                                                    "line": 20,
                                                    "column": 89,
                                                    "offset": 1061
                                                },
                                                "end": {
                                                    "line": 20,
                                                    "column": 163,
                                                    "offset": 1135
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "ApolloGateway",
                                            "position": {
                                                "start": {
                                                    "line": 20,
                                                    "column": 163,
                                                    "offset": 1135
                                                },
                                                "end": {
                                                    "line": 20,
                                                    "column": 178,
                                                    "offset": 1150
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " to the ",
                                            "position": {
                                                "start": {
                                                    "line": 20,
                                                    "column": 178,
                                                    "offset": 1150
                                                },
                                                "end": {
                                                    "line": 20,
                                                    "column": 186,
                                                    "offset": 1158
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "ApolloServer",
                                            "position": {
                                                "start": {
                                                    "line": 20,
                                                    "column": 186,
                                                    "offset": 1158
                                                },
                                                "end": {
                                                    "line": 20,
                                                    "column": 200,
                                                    "offset": 1172
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " constructor, like so:",
                                            "position": {
                                                "start": {
                                                    "line": 20,
                                                    "column": 200,
                                                    "offset": 1172
                                                },
                                                "end": {
                                                    "line": 20,
                                                    "column": 222,
                                                    "offset": 1194
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 20,
                                            "column": 1,
                                            "offset": 973
                                        },
                                        "end": {
                                            "line": 20,
                                            "column": 222,
                                            "offset": 1194
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "js",
                                    "meta": null,
                                    "value": "const { ApolloServer } = require('apollo-server');\nconst { ApolloGateway } = require('@apollo/gateway');\n\n// Initialize an ApolloGateway instance and pass it an array of\n// your implementing service names and URLs\nconst gateway = new ApolloGateway({\n  serviceList: [\n    { name: 'accounts', url: 'http://localhost:4001' },\n    // Define additional services here\n  ],\n});\n\n// Pass the ApolloGateway to the ApolloServer constructor\nconst server = new ApolloServer({\n  gateway,\n\n  // Disable subscriptions (not currently supported with ApolloGateway)\n  subscriptions: false,\n});\n\nserver.listen().then(({ url }) => {\n  console.log(`ðŸš€ Server ready at ${url}`);\n});",
                                    "position": {
                                        "start": {
                                            "line": 22,
                                            "column": 1,
                                            "offset": 1196
                                        },
                                        "end": {
                                            "line": 46,
                                            "column": 4,
                                            "offset": 1866
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "In the above example, we provide the ",
                                            "position": {
                                                "start": {
                                                    "line": 48,
                                                    "column": 1,
                                                    "offset": 1868
                                                },
                                                "end": {
                                                    "line": 48,
                                                    "column": 38,
                                                    "offset": 1905
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "serviceList",
                                            "position": {
                                                "start": {
                                                    "line": 48,
                                                    "column": 38,
                                                    "offset": 1905
                                                },
                                                "end": {
                                                    "line": 48,
                                                    "column": 51,
                                                    "offset": 1918
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " configuration option to the\n",
                                            "position": {
                                                "start": {
                                                    "line": 48,
                                                    "column": 51,
                                                    "offset": 1918
                                                },
                                                "end": {
                                                    "line": 49,
                                                    "column": 1,
                                                    "offset": 1947
                                                },
                                                "indent": [
                                                    1
                                                ]
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "ApolloGateway",
                                            "position": {
                                                "start": {
                                                    "line": 49,
                                                    "column": 1,
                                                    "offset": 1947
                                                },
                                                "end": {
                                                    "line": 49,
                                                    "column": 16,
                                                    "offset": 1962
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " constructor. This array specifies a ",
                                            "position": {
                                                "start": {
                                                    "line": 49,
                                                    "column": 16,
                                                    "offset": 1962
                                                },
                                                "end": {
                                                    "line": 49,
                                                    "column": 53,
                                                    "offset": 1999
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "name",
                                            "position": {
                                                "start": {
                                                    "line": 49,
                                                    "column": 53,
                                                    "offset": 1999
                                                },
                                                "end": {
                                                    "line": 49,
                                                    "column": 59,
                                                    "offset": 2005
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " and ",
                                            "position": {
                                                "start": {
                                                    "line": 49,
                                                    "column": 59,
                                                    "offset": 2005
                                                },
                                                "end": {
                                                    "line": 49,
                                                    "column": 64,
                                                    "offset": 2010
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "url",
                                            "position": {
                                                "start": {
                                                    "line": 49,
                                                    "column": 64,
                                                    "offset": 2010
                                                },
                                                "end": {
                                                    "line": 49,
                                                    "column": 69,
                                                    "offset": 2015
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " for each\nof our implementing services. You can specify any string value for ",
                                            "position": {
                                                "start": {
                                                    "line": 49,
                                                    "column": 69,
                                                    "offset": 2015
                                                },
                                                "end": {
                                                    "line": 50,
                                                    "column": 68,
                                                    "offset": 2092
                                                },
                                                "indent": [
                                                    1
                                                ]
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "name",
                                            "position": {
                                                "start": {
                                                    "line": 50,
                                                    "column": 68,
                                                    "offset": 2092
                                                },
                                                "end": {
                                                    "line": 50,
                                                    "column": 74,
                                                    "offset": 2098
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ", which\nis used primarily for query planner output, error messages, and logging.",
                                            "position": {
                                                "start": {
                                                    "line": 50,
                                                    "column": 74,
                                                    "offset": 2098
                                                },
                                                "end": {
                                                    "line": 51,
                                                    "column": 73,
                                                    "offset": 2178
                                                },
                                                "indent": [
                                                    1
                                                ]
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 48,
                                            "column": 1,
                                            "offset": 1868
                                        },
                                        "end": {
                                            "line": 51,
                                            "column": 73,
                                            "offset": 2178
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "blockquote",
                                    "children": [
                                        {
                                            "type": "paragraph",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "In production, we recommend running the gateway in a ",
                                                    "position": {
                                                        "start": {
                                                            "line": 53,
                                                            "column": 3,
                                                            "offset": 2182
                                                        },
                                                        "end": {
                                                            "line": 53,
                                                            "column": 56,
                                                            "offset": 2235
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "strong",
                                                    "children": [
                                                        {
                                                            "type": "text",
                                                            "value": "managed mode",
                                                            "position": {
                                                                "start": {
                                                                    "line": 53,
                                                                    "column": 58,
                                                                    "offset": 2237
                                                                },
                                                                "end": {
                                                                    "line": 53,
                                                                    "column": 70,
                                                                    "offset": 2249
                                                                },
                                                                "indent": []
                                                            }
                                                        }
                                                    ],
                                                    "position": {
                                                        "start": {
                                                            "line": 53,
                                                            "column": 56,
                                                            "offset": 2235
                                                        },
                                                        "end": {
                                                            "line": 53,
                                                            "column": 72,
                                                            "offset": 2251
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": " with Apollo Studio, which relies on static files rather than introspection. For details, see ",
                                                    "position": {
                                                        "start": {
                                                            "line": 53,
                                                            "column": 72,
                                                            "offset": 2251
                                                        },
                                                        "end": {
                                                            "line": 53,
                                                            "column": 166,
                                                            "offset": 2345
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "link",
                                                    "title": null,
                                                    "url": "https://www.apollographql.com/docs/studio/managed-federation/setup/",
                                                    "children": [
                                                        {
                                                            "type": "text",
                                                            "value": "Setting up managed federation",
                                                            "position": {
                                                                "start": {
                                                                    "line": 53,
                                                                    "column": 167,
                                                                    "offset": 2346
                                                                },
                                                                "end": {
                                                                    "line": 53,
                                                                    "column": 196,
                                                                    "offset": 2375
                                                                },
                                                                "indent": []
                                                            }
                                                        }
                                                    ],
                                                    "position": {
                                                        "start": {
                                                            "line": 53,
                                                            "column": 166,
                                                            "offset": 2345
                                                        },
                                                        "end": {
                                                            "line": 53,
                                                            "column": 266,
                                                            "offset": 2445
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": ".",
                                                    "position": {
                                                        "start": {
                                                            "line": 53,
                                                            "column": 266,
                                                            "offset": 2445
                                                        },
                                                        "end": {
                                                            "line": 53,
                                                            "column": 267,
                                                            "offset": 2446
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 53,
                                                    "column": 3,
                                                    "offset": 2182
                                                },
                                                "end": {
                                                    "line": 53,
                                                    "column": 267,
                                                    "offset": 2446
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 53,
                                            "column": 1,
                                            "offset": 2180
                                        },
                                        "end": {
                                            "line": 53,
                                            "column": 267,
                                            "offset": 2446
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "On startup, the gateway fetches each implementing service's schema from its ",
                                            "position": {
                                                "start": {
                                                    "line": 55,
                                                    "column": 1,
                                                    "offset": 2448
                                                },
                                                "end": {
                                                    "line": 55,
                                                    "column": 77,
                                                    "offset": 2524
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "url",
                                            "position": {
                                                "start": {
                                                    "line": 55,
                                                    "column": 77,
                                                    "offset": 2524
                                                },
                                                "end": {
                                                    "line": 55,
                                                    "column": 82,
                                                    "offset": 2529
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " and composes those schemas into a single federated data graph. It then begins accepting incoming requests and creates query plans for them that execute across one or more services.",
                                            "position": {
                                                "start": {
                                                    "line": 55,
                                                    "column": 82,
                                                    "offset": 2529
                                                },
                                                "end": {
                                                    "line": 55,
                                                    "column": 263,
                                                    "offset": 2710
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 55,
                                            "column": 1,
                                            "offset": 2448
                                        },
                                        "end": {
                                            "line": 55,
                                            "column": 263,
                                            "offset": 2710
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "blockquote",
                                    "children": [
                                        {
                                            "type": "paragraph",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "If there are any composition errors, the ",
                                                    "position": {
                                                        "start": {
                                                            "line": 57,
                                                            "column": 3,
                                                            "offset": 2714
                                                        },
                                                        "end": {
                                                            "line": 57,
                                                            "column": 44,
                                                            "offset": 2755
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "inlineCode",
                                                    "value": "new ApolloServer",
                                                    "position": {
                                                        "start": {
                                                            "line": 57,
                                                            "column": 44,
                                                            "offset": 2755
                                                        },
                                                        "end": {
                                                            "line": 57,
                                                            "column": 62,
                                                            "offset": 2773
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": " call throws an exception\nwith a list of ",
                                                    "position": {
                                                        "start": {
                                                            "line": 57,
                                                            "column": 62,
                                                            "offset": 2773
                                                        },
                                                        "end": {
                                                            "line": 58,
                                                            "column": 18,
                                                            "offset": 2816
                                                        },
                                                        "indent": [
                                                            3
                                                        ]
                                                    }
                                                },
                                                {
                                                    "type": "link",
                                                    "title": null,
                                                    "url": "/errors/",
                                                    "children": [
                                                        {
                                                            "type": "text",
                                                            "value": "validation errors",
                                                            "position": {
                                                                "start": {
                                                                    "line": 58,
                                                                    "column": 19,
                                                                    "offset": 2817
                                                                },
                                                                "end": {
                                                                    "line": 58,
                                                                    "column": 36,
                                                                    "offset": 2834
                                                                },
                                                                "indent": []
                                                            }
                                                        }
                                                    ],
                                                    "position": {
                                                        "start": {
                                                            "line": 58,
                                                            "column": 18,
                                                            "offset": 2816
                                                        },
                                                        "end": {
                                                            "line": 58,
                                                            "column": 47,
                                                            "offset": 2845
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": ".",
                                                    "position": {
                                                        "start": {
                                                            "line": 58,
                                                            "column": 47,
                                                            "offset": 2845
                                                        },
                                                        "end": {
                                                            "line": 58,
                                                            "column": 48,
                                                            "offset": 2846
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 57,
                                                    "column": 3,
                                                    "offset": 2714
                                                },
                                                "end": {
                                                    "line": 58,
                                                    "column": 48,
                                                    "offset": 2846
                                                },
                                                "indent": [
                                                    3
                                                ]
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 57,
                                            "column": 1,
                                            "offset": 2712
                                        },
                                        "end": {
                                            "line": 58,
                                            "column": 48,
                                            "offset": 2846
                                        },
                                        "indent": [
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 2,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Customizing requests and responses",
                                            "position": {
                                                "start": {
                                                    "line": 60,
                                                    "column": 4,
                                                    "offset": 2851
                                                },
                                                "end": {
                                                    "line": 60,
                                                    "column": 38,
                                                    "offset": 2885
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 60,
                                            "column": 1,
                                            "offset": 2848
                                        },
                                        "end": {
                                            "line": 60,
                                            "column": 38,
                                            "offset": 2885
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "The gateway can modify the details of an incoming request before executing it across your implementing services. For example, your services might all use the same authorization token to associate an incoming request with a particular user. The gateway can add that token to each operation it sends to your services.",
                                            "position": {
                                                "start": {
                                                    "line": 62,
                                                    "column": 1,
                                                    "offset": 2887
                                                },
                                                "end": {
                                                    "line": 62,
                                                    "column": 316,
                                                    "offset": 3202
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 62,
                                            "column": 1,
                                            "offset": 2887
                                        },
                                        "end": {
                                            "line": 62,
                                            "column": 316,
                                            "offset": 3202
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Similarly, the gateway can modify the details of its response to a client, based on the result returned by each implementing service.",
                                            "position": {
                                                "start": {
                                                    "line": 64,
                                                    "column": 1,
                                                    "offset": 3204
                                                },
                                                "end": {
                                                    "line": 64,
                                                    "column": 134,
                                                    "offset": 3337
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 64,
                                            "column": 1,
                                            "offset": 3204
                                        },
                                        "end": {
                                            "line": 64,
                                            "column": 134,
                                            "offset": 3337
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 3,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Customizing requests",
                                            "position": {
                                                "start": {
                                                    "line": 66,
                                                    "column": 5,
                                                    "offset": 3343
                                                },
                                                "end": {
                                                    "line": 66,
                                                    "column": 25,
                                                    "offset": 3363
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 66,
                                            "column": 1,
                                            "offset": 3339
                                        },
                                        "end": {
                                            "line": 66,
                                            "column": 25,
                                            "offset": 3363
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "In the following example, each incoming request to the gateway includes an ",
                                            "position": {
                                                "start": {
                                                    "line": 68,
                                                    "column": 1,
                                                    "offset": 3365
                                                },
                                                "end": {
                                                    "line": 68,
                                                    "column": 76,
                                                    "offset": 3440
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "Authorization",
                                            "position": {
                                                "start": {
                                                    "line": 68,
                                                    "column": 76,
                                                    "offset": 3440
                                                },
                                                "end": {
                                                    "line": 68,
                                                    "column": 91,
                                                    "offset": 3455
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " header. The gateway sets the shared ",
                                            "position": {
                                                "start": {
                                                    "line": 68,
                                                    "column": 91,
                                                    "offset": 3455
                                                },
                                                "end": {
                                                    "line": 68,
                                                    "column": 128,
                                                    "offset": 3492
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "context",
                                            "position": {
                                                "start": {
                                                    "line": 68,
                                                    "column": 128,
                                                    "offset": 3492
                                                },
                                                "end": {
                                                    "line": 68,
                                                    "column": 137,
                                                    "offset": 3501
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " for an operation  by pulling the value of that header and using it to fetch the associated user's ID.",
                                            "position": {
                                                "start": {
                                                    "line": 68,
                                                    "column": 137,
                                                    "offset": 3501
                                                },
                                                "end": {
                                                    "line": 68,
                                                    "column": 239,
                                                    "offset": 3603
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 68,
                                            "column": 1,
                                            "offset": 3365
                                        },
                                        "end": {
                                            "line": 68,
                                            "column": 239,
                                            "offset": 3603
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "After adding the ",
                                            "position": {
                                                "start": {
                                                    "line": 70,
                                                    "column": 1,
                                                    "offset": 3605
                                                },
                                                "end": {
                                                    "line": 70,
                                                    "column": 18,
                                                    "offset": 3622
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "userId",
                                            "position": {
                                                "start": {
                                                    "line": 70,
                                                    "column": 18,
                                                    "offset": 3622
                                                },
                                                "end": {
                                                    "line": 70,
                                                    "column": 26,
                                                    "offset": 3630
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " to the shared ",
                                            "position": {
                                                "start": {
                                                    "line": 70,
                                                    "column": 26,
                                                    "offset": 3630
                                                },
                                                "end": {
                                                    "line": 70,
                                                    "column": 41,
                                                    "offset": 3645
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "context",
                                            "position": {
                                                "start": {
                                                    "line": 70,
                                                    "column": 41,
                                                    "offset": 3645
                                                },
                                                "end": {
                                                    "line": 70,
                                                    "column": 50,
                                                    "offset": 3654
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " object, the gateway can then add that value to a header that it includes in its requests to each implementing service.",
                                            "position": {
                                                "start": {
                                                    "line": 70,
                                                    "column": 50,
                                                    "offset": 3654
                                                },
                                                "end": {
                                                    "line": 70,
                                                    "column": 169,
                                                    "offset": 3773
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 70,
                                            "column": 1,
                                            "offset": 3605
                                        },
                                        "end": {
                                            "line": 70,
                                            "column": 169,
                                            "offset": 3773
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "jsx",
                                    "value": "<ExpansionPanel title=\"Expand example\">",
                                    "position": {
                                        "start": {
                                            "line": 72,
                                            "column": 1,
                                            "offset": 3775
                                        },
                                        "end": {
                                            "line": 72,
                                            "column": 40,
                                            "offset": 3814
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "javascript{4-10,17-19,28-35}",
                                    "meta": null,
                                    "value": "const { ApolloServer } = require('apollo-server');\nconst { ApolloGateway, RemoteGraphQLDataSource } = require('@apollo/gateway');\n\nclass AuthenticatedDataSource extends RemoteGraphQLDataSource {\n  willSendRequest({ request, context }) {\n    // Pass the user's id from the context to underlying services\n    // as a header called `user-id`\n    request.http.headers.set('user-id', context.userId);\n  }\n}\n\nconst gateway = new ApolloGateway({\n  serviceList: [\n    { name: 'products', url: 'http://localhost:4001' },\n    // List other services here\n  ],\n  buildService({ name, url }) {\n    return new AuthenticatedDataSource({ url });\n  },\n});\n\nconst server = new ApolloServer({\n  gateway,\n\n  // Disable subscriptions (not currently supported with ApolloGateway)\n  subscriptions: false,\n\n  context: ({ req }) => {\n    // Get the user token from the headers\n    const token = req.headers.authorization || '';\n    // Try to retrieve a user with the token\n    const userId = getUserId(token);\n    // Add the user ID to the context\n    return { userId };\n  },\n});\n\nserver.listen().then(({ url }) => {\n  console.log(`ðŸš€ Server ready at ${url}`);\n});",
                                    "position": {
                                        "start": {
                                            "line": 74,
                                            "column": 1,
                                            "offset": 3816
                                        },
                                        "end": {
                                            "line": 115,
                                            "column": 4,
                                            "offset": 4991
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "jsx",
                                    "value": "</ExpansionPanel>",
                                    "position": {
                                        "start": {
                                            "line": 117,
                                            "column": 1,
                                            "offset": 4993
                                        },
                                        "end": {
                                            "line": 117,
                                            "column": 18,
                                            "offset": 5010
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "blockquote",
                                    "children": [
                                        {
                                            "type": "paragraph",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "The fields of the object passed to your ",
                                                    "position": {
                                                        "start": {
                                                            "line": 119,
                                                            "column": 3,
                                                            "offset": 5014
                                                        },
                                                        "end": {
                                                            "line": 119,
                                                            "column": 43,
                                                            "offset": 5054
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "inlineCode",
                                                    "value": "context",
                                                    "position": {
                                                        "start": {
                                                            "line": 119,
                                                            "column": 43,
                                                            "offset": 5054
                                                        },
                                                        "end": {
                                                            "line": 119,
                                                            "column": 52,
                                                            "offset": 5063
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": " function differ if you're using middleware besides Express. ",
                                                    "position": {
                                                        "start": {
                                                            "line": 119,
                                                            "column": 52,
                                                            "offset": 5063
                                                        },
                                                        "end": {
                                                            "line": 119,
                                                            "column": 113,
                                                            "offset": 5124
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "link",
                                                    "title": null,
                                                    "url": "https://www.apollographql.com/docs/apollo-server/api/apollo-server/#middleware-specific-context-fields",
                                                    "children": [
                                                        {
                                                            "type": "text",
                                                            "value": "See the API reference for details.",
                                                            "position": {
                                                                "start": {
                                                                    "line": 119,
                                                                    "column": 114,
                                                                    "offset": 5125
                                                                },
                                                                "end": {
                                                                    "line": 119,
                                                                    "column": 148,
                                                                    "offset": 5159
                                                                },
                                                                "indent": []
                                                            }
                                                        }
                                                    ],
                                                    "position": {
                                                        "start": {
                                                            "line": 119,
                                                            "column": 113,
                                                            "offset": 5124
                                                        },
                                                        "end": {
                                                            "line": 119,
                                                            "column": 253,
                                                            "offset": 5264
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 119,
                                                    "column": 3,
                                                    "offset": 5014
                                                },
                                                "end": {
                                                    "line": 119,
                                                    "column": 253,
                                                    "offset": 5264
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 119,
                                            "column": 1,
                                            "offset": 5012
                                        },
                                        "end": {
                                            "line": 119,
                                            "column": 253,
                                            "offset": 5264
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "The ",
                                            "position": {
                                                "start": {
                                                    "line": 121,
                                                    "column": 1,
                                                    "offset": 5266
                                                },
                                                "end": {
                                                    "line": 121,
                                                    "column": 5,
                                                    "offset": 5270
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "buildService",
                                            "position": {
                                                "start": {
                                                    "line": 121,
                                                    "column": 5,
                                                    "offset": 5270
                                                },
                                                "end": {
                                                    "line": 121,
                                                    "column": 19,
                                                    "offset": 5284
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " function enables us to customize the requests that are sent to our implementing services. In this example, we return a custom ",
                                            "position": {
                                                "start": {
                                                    "line": 121,
                                                    "column": 19,
                                                    "offset": 5284
                                                },
                                                "end": {
                                                    "line": 121,
                                                    "column": 146,
                                                    "offset": 5411
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "RemoteGraphQLDataSource",
                                            "position": {
                                                "start": {
                                                    "line": 121,
                                                    "column": 146,
                                                    "offset": 5411
                                                },
                                                "end": {
                                                    "line": 121,
                                                    "column": 171,
                                                    "offset": 5436
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ". The datasource allows us to modify the outgoing request with information from the Apollo Server ",
                                            "position": {
                                                "start": {
                                                    "line": 121,
                                                    "column": 171,
                                                    "offset": 5436
                                                },
                                                "end": {
                                                    "line": 121,
                                                    "column": 269,
                                                    "offset": 5534
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "context",
                                            "position": {
                                                "start": {
                                                    "line": 121,
                                                    "column": 269,
                                                    "offset": 5534
                                                },
                                                "end": {
                                                    "line": 121,
                                                    "column": 278,
                                                    "offset": 5543
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " before it's sent. Here, we add the ",
                                            "position": {
                                                "start": {
                                                    "line": 121,
                                                    "column": 278,
                                                    "offset": 5543
                                                },
                                                "end": {
                                                    "line": 121,
                                                    "column": 314,
                                                    "offset": 5579
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "user-id",
                                            "position": {
                                                "start": {
                                                    "line": 121,
                                                    "column": 314,
                                                    "offset": 5579
                                                },
                                                "end": {
                                                    "line": 121,
                                                    "column": 323,
                                                    "offset": 5588
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " header to pass an authenticated user ID to downstream services.",
                                            "position": {
                                                "start": {
                                                    "line": 121,
                                                    "column": 323,
                                                    "offset": 5588
                                                },
                                                "end": {
                                                    "line": 121,
                                                    "column": 387,
                                                    "offset": 5652
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 121,
                                            "column": 1,
                                            "offset": 5266
                                        },
                                        "end": {
                                            "line": 121,
                                            "column": 387,
                                            "offset": 5652
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 3,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Customizing responses",
                                            "position": {
                                                "start": {
                                                    "line": 123,
                                                    "column": 5,
                                                    "offset": 5658
                                                },
                                                "end": {
                                                    "line": 123,
                                                    "column": 26,
                                                    "offset": 5679
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 123,
                                            "column": 1,
                                            "offset": 5654
                                        },
                                        "end": {
                                            "line": 123,
                                            "column": 26,
                                            "offset": 5679
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Let's say that whenever our implementing services return an operation result to the gateway, they include a ",
                                            "position": {
                                                "start": {
                                                    "line": 125,
                                                    "column": 1,
                                                    "offset": 5681
                                                },
                                                "end": {
                                                    "line": 125,
                                                    "column": 109,
                                                    "offset": 5789
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "Server-Id",
                                            "position": {
                                                "start": {
                                                    "line": 125,
                                                    "column": 109,
                                                    "offset": 5789
                                                },
                                                "end": {
                                                    "line": 125,
                                                    "column": 120,
                                                    "offset": 5800
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " header in the response. The value of the header uniquely identifies the service in our graph.",
                                            "position": {
                                                "start": {
                                                    "line": 125,
                                                    "column": 120,
                                                    "offset": 5800
                                                },
                                                "end": {
                                                    "line": 125,
                                                    "column": 214,
                                                    "offset": 5894
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 125,
                                            "column": 1,
                                            "offset": 5681
                                        },
                                        "end": {
                                            "line": 125,
                                            "column": 214,
                                            "offset": 5894
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "When the gateway then responds to a client, we want ",
                                            "position": {
                                                "start": {
                                                    "line": 127,
                                                    "column": 1,
                                                    "offset": 5896
                                                },
                                                "end": {
                                                    "line": 127,
                                                    "column": 53,
                                                    "offset": 5948
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "emphasis",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "its",
                                                    "position": {
                                                        "start": {
                                                            "line": 127,
                                                            "column": 54,
                                                            "offset": 5949
                                                        },
                                                        "end": {
                                                            "line": 127,
                                                            "column": 57,
                                                            "offset": 5952
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 127,
                                                    "column": 53,
                                                    "offset": 5948
                                                },
                                                "end": {
                                                    "line": 127,
                                                    "column": 58,
                                                    "offset": 5953
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " ",
                                            "position": {
                                                "start": {
                                                    "line": 127,
                                                    "column": 58,
                                                    "offset": 5953
                                                },
                                                "end": {
                                                    "line": 127,
                                                    "column": 59,
                                                    "offset": 5954
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "Server-Id",
                                            "position": {
                                                "start": {
                                                    "line": 127,
                                                    "column": 59,
                                                    "offset": 5954
                                                },
                                                "end": {
                                                    "line": 127,
                                                    "column": 70,
                                                    "offset": 5965
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " header to include the identifier for ",
                                            "position": {
                                                "start": {
                                                    "line": 127,
                                                    "column": 70,
                                                    "offset": 5965
                                                },
                                                "end": {
                                                    "line": 127,
                                                    "column": 108,
                                                    "offset": 6003
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "emphasis",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "every",
                                                    "position": {
                                                        "start": {
                                                            "line": 127,
                                                            "column": 109,
                                                            "offset": 6004
                                                        },
                                                        "end": {
                                                            "line": 127,
                                                            "column": 114,
                                                            "offset": 6009
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 127,
                                                    "column": 108,
                                                    "offset": 6003
                                                },
                                                "end": {
                                                    "line": 127,
                                                    "column": 115,
                                                    "offset": 6010
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " service that contributed to the response. In this case, we can tell the gateway to aggregate the various server IDs into a single, comma-separated list.",
                                            "position": {
                                                "start": {
                                                    "line": 127,
                                                    "column": 115,
                                                    "offset": 6010
                                                },
                                                "end": {
                                                    "line": 127,
                                                    "column": 268,
                                                    "offset": 6163
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 127,
                                            "column": 1,
                                            "offset": 5896
                                        },
                                        "end": {
                                            "line": 127,
                                            "column": 268,
                                            "offset": 6163
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "The flow for processing a single operation from a client application then looks like this:",
                                            "position": {
                                                "start": {
                                                    "line": 129,
                                                    "column": 1,
                                                    "offset": 6165
                                                },
                                                "end": {
                                                    "line": 129,
                                                    "column": 91,
                                                    "offset": 6255
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 129,
                                            "column": 1,
                                            "offset": 6165
                                        },
                                        "end": {
                                            "line": 129,
                                            "column": 91,
                                            "offset": 6255
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "mermaid",
                                    "meta": null,
                                    "value": "sequenceDiagram;\n  Client app->>Gateway: Sends GraphQL operation\n  Gateway->>Gateway: Generates query plan for operation\n  loop For each operation in the query plan\n    Gateway->>Implementing Services: Sends the operation to the applicable service\n    Implementing Services->>Gateway: Responds with result and Server-Id header\n    Gateway->>Gateway: Adds the returned Server-Id to the shared context\n  end\n  Gateway->>Gateway: Adds all Server-Ids in the shared context to the response header\n  Gateway->>Client app: Sends operation response",
                                    "position": {
                                        "start": {
                                            "line": 131,
                                            "column": 1,
                                            "offset": 6257
                                        },
                                        "end": {
                                            "line": 142,
                                            "column": 4,
                                            "offset": 6812
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "To implement this flow, we can use the ",
                                            "position": {
                                                "start": {
                                                    "line": 144,
                                                    "column": 1,
                                                    "offset": 6814
                                                },
                                                "end": {
                                                    "line": 144,
                                                    "column": 40,
                                                    "offset": 6853
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "didReceiveResponse",
                                            "position": {
                                                "start": {
                                                    "line": 144,
                                                    "column": 40,
                                                    "offset": 6853
                                                },
                                                "end": {
                                                    "line": 144,
                                                    "column": 60,
                                                    "offset": 6873
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " callback of the ",
                                            "position": {
                                                "start": {
                                                    "line": 144,
                                                    "column": 60,
                                                    "offset": 6873
                                                },
                                                "end": {
                                                    "line": 144,
                                                    "column": 77,
                                                    "offset": 6890
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "RemoteGraphQLDataSource",
                                            "position": {
                                                "start": {
                                                    "line": 144,
                                                    "column": 77,
                                                    "offset": 6890
                                                },
                                                "end": {
                                                    "line": 144,
                                                    "column": 102,
                                                    "offset": 6915
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " class to inspect each implementing service's result as it comes in. We can add the ",
                                            "position": {
                                                "start": {
                                                    "line": 144,
                                                    "column": 102,
                                                    "offset": 6915
                                                },
                                                "end": {
                                                    "line": 144,
                                                    "column": 186,
                                                    "offset": 6999
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "Server-Id",
                                            "position": {
                                                "start": {
                                                    "line": 144,
                                                    "column": 186,
                                                    "offset": 6999
                                                },
                                                "end": {
                                                    "line": 144,
                                                    "column": 197,
                                                    "offset": 7010
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " to the shared ",
                                            "position": {
                                                "start": {
                                                    "line": 144,
                                                    "column": 197,
                                                    "offset": 7010
                                                },
                                                "end": {
                                                    "line": 144,
                                                    "column": 212,
                                                    "offset": 7025
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "context",
                                            "position": {
                                                "start": {
                                                    "line": 144,
                                                    "column": 212,
                                                    "offset": 7025
                                                },
                                                "end": {
                                                    "line": 144,
                                                    "column": 221,
                                                    "offset": 7034
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " in this callback, then pull the full list from the ",
                                            "position": {
                                                "start": {
                                                    "line": 144,
                                                    "column": 221,
                                                    "offset": 7034
                                                },
                                                "end": {
                                                    "line": 144,
                                                    "column": 273,
                                                    "offset": 7086
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "context",
                                            "position": {
                                                "start": {
                                                    "line": 144,
                                                    "column": 273,
                                                    "offset": 7086
                                                },
                                                "end": {
                                                    "line": 144,
                                                    "column": 282,
                                                    "offset": 7095
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " when sending the final response to the client.",
                                            "position": {
                                                "start": {
                                                    "line": 144,
                                                    "column": 282,
                                                    "offset": 7095
                                                },
                                                "end": {
                                                    "line": 144,
                                                    "column": 329,
                                                    "offset": 7142
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 144,
                                            "column": 1,
                                            "offset": 6814
                                        },
                                        "end": {
                                            "line": 144,
                                            "column": 329,
                                            "offset": 7142
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "jsx",
                                    "value": "<ExpansionPanel title=\"Expand example\">",
                                    "position": {
                                        "start": {
                                            "line": 146,
                                            "column": 1,
                                            "offset": 7144
                                        },
                                        "end": {
                                            "line": 146,
                                            "column": 40,
                                            "offset": 7183
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "javascript",
                                    "meta": null,
                                    "value": "const { ApolloServer } = require('apollo-server');\nconst { ApolloGateway, RemoteGraphQLDataSource } = require('@apollo/gateway');\n\nclass DataSourceWithServerId extends RemoteGraphQLDataSource {\n  // highlight-start\n  async didReceiveResponse({ response, request, context }) {\n    // Parse the Server-Id header and add it to the array on context\n    const serverId = response.http.headers.get('Server-Id');\n    if (serverId) {\n      context.serverIds.push(serverId);\n    }\n\n    // Return the response, even when unchanged.\n    return response;\n  }\n  // highlight-end\n}\n\nconst gateway = new ApolloGateway({\n  serviceList: [\n    { name: 'products', url: 'http://localhost:4001' }\n    // other services\n  ],\n  // highlight-start\n  buildService({ url }) {\n    return new DataSourceWithServerId({ url });\n  }\n  // highlight-end\n});\n\nconst server = new ApolloServer({\n  gateway,\n  subscriptions: false, // Must be disabled with the gateway; see above.\n  context() {\n    return { serverIds: [] };\n  },\n  plugins: [\n    // highlight-start\n    {\n      requestDidStart() {\n        return {\n          willSendResponse({ context, response }) {\n            // Append our final result to the outgoing response headers\n            response.http.headers.set(\n              'Server-Id',\n              context.serverIds.join(',')\n            );\n          }\n        };\n      }\n    }\n    // highlight-end\n  ]\n});\n\nserver.listen().then(({ url }) => {\n  console.log(`ðŸš€ Server ready at ${url}`);\n});",
                                    "position": {
                                        "start": {
                                            "line": 148,
                                            "column": 1,
                                            "offset": 7185
                                        },
                                        "end": {
                                            "line": 207,
                                            "column": 4,
                                            "offset": 8679
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "jsx",
                                    "value": "</ExpansionPanel>",
                                    "position": {
                                        "start": {
                                            "line": 209,
                                            "column": 1,
                                            "offset": 8681
                                        },
                                        "end": {
                                            "line": 209,
                                            "column": 18,
                                            "offset": 8698
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "blockquote",
                                    "children": [
                                        {
                                            "type": "paragraph",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "In this example, multiple calls to ",
                                                    "position": {
                                                        "start": {
                                                            "line": 211,
                                                            "column": 3,
                                                            "offset": 8702
                                                        },
                                                        "end": {
                                                            "line": 211,
                                                            "column": 38,
                                                            "offset": 8737
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "inlineCode",
                                                    "value": "didReceiveResponse",
                                                    "position": {
                                                        "start": {
                                                            "line": 211,
                                                            "column": 38,
                                                            "offset": 8737
                                                        },
                                                        "end": {
                                                            "line": 211,
                                                            "column": 58,
                                                            "offset": 8757
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": " are ",
                                                    "position": {
                                                        "start": {
                                                            "line": 211,
                                                            "column": 58,
                                                            "offset": 8757
                                                        },
                                                        "end": {
                                                            "line": 211,
                                                            "column": 63,
                                                            "offset": 8762
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "inlineCode",
                                                    "value": "push",
                                                    "position": {
                                                        "start": {
                                                            "line": 211,
                                                            "column": 63,
                                                            "offset": 8762
                                                        },
                                                        "end": {
                                                            "line": 211,
                                                            "column": 69,
                                                            "offset": 8768
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": "ing a value onto the shared ",
                                                    "position": {
                                                        "start": {
                                                            "line": 211,
                                                            "column": 69,
                                                            "offset": 8768
                                                        },
                                                        "end": {
                                                            "line": 211,
                                                            "column": 97,
                                                            "offset": 8796
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "inlineCode",
                                                    "value": "context.serverIds",
                                                    "position": {
                                                        "start": {
                                                            "line": 211,
                                                            "column": 97,
                                                            "offset": 8796
                                                        },
                                                        "end": {
                                                            "line": 211,
                                                            "column": 116,
                                                            "offset": 8815
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": " array. The order of these calls cannot be guaranteed. If you write logic that modifies the shared ",
                                                    "position": {
                                                        "start": {
                                                            "line": 211,
                                                            "column": 116,
                                                            "offset": 8815
                                                        },
                                                        "end": {
                                                            "line": 211,
                                                            "column": 215,
                                                            "offset": 8914
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "inlineCode",
                                                    "value": "context",
                                                    "position": {
                                                        "start": {
                                                            "line": 211,
                                                            "column": 215,
                                                            "offset": 8914
                                                        },
                                                        "end": {
                                                            "line": 211,
                                                            "column": 224,
                                                            "offset": 8923
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": " object, make sure that modifications are not destructive, and that the order of modifications doesn't matter.",
                                                    "position": {
                                                        "start": {
                                                            "line": 211,
                                                            "column": 224,
                                                            "offset": 8923
                                                        },
                                                        "end": {
                                                            "line": 211,
                                                            "column": 334,
                                                            "offset": 9033
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 211,
                                                    "column": 3,
                                                    "offset": 8702
                                                },
                                                "end": {
                                                    "line": 211,
                                                    "column": 334,
                                                    "offset": 9033
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 211,
                                            "column": 1,
                                            "offset": 8700
                                        },
                                        "end": {
                                            "line": 211,
                                            "column": 334,
                                            "offset": 9033
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "To learn more about ",
                                            "position": {
                                                "start": {
                                                    "line": 213,
                                                    "column": 1,
                                                    "offset": 9035
                                                },
                                                "end": {
                                                    "line": 213,
                                                    "column": 21,
                                                    "offset": 9055
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "buildService",
                                            "position": {
                                                "start": {
                                                    "line": 213,
                                                    "column": 21,
                                                    "offset": 9055
                                                },
                                                "end": {
                                                    "line": 213,
                                                    "column": 35,
                                                    "offset": 9069
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " and ",
                                            "position": {
                                                "start": {
                                                    "line": 213,
                                                    "column": 35,
                                                    "offset": 9069
                                                },
                                                "end": {
                                                    "line": 213,
                                                    "column": 40,
                                                    "offset": 9074
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "RemoteGraphQLDataSource",
                                            "position": {
                                                "start": {
                                                    "line": 213,
                                                    "column": 40,
                                                    "offset": 9074
                                                },
                                                "end": {
                                                    "line": 213,
                                                    "column": 65,
                                                    "offset": 9099
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ", see the ",
                                            "position": {
                                                "start": {
                                                    "line": 213,
                                                    "column": 65,
                                                    "offset": 9099
                                                },
                                                "end": {
                                                    "line": 213,
                                                    "column": 75,
                                                    "offset": 9109
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "link",
                                            "title": null,
                                            "url": "/api/apollo-gateway/",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "API docs",
                                                    "position": {
                                                        "start": {
                                                            "line": 213,
                                                            "column": 76,
                                                            "offset": 9110
                                                        },
                                                        "end": {
                                                            "line": 213,
                                                            "column": 84,
                                                            "offset": 9118
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 213,
                                                    "column": 75,
                                                    "offset": 9109
                                                },
                                                "end": {
                                                    "line": 213,
                                                    "column": 107,
                                                    "offset": 9141
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ".",
                                            "position": {
                                                "start": {
                                                    "line": 213,
                                                    "column": 107,
                                                    "offset": 9141
                                                },
                                                "end": {
                                                    "line": 213,
                                                    "column": 108,
                                                    "offset": 9142
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 213,
                                            "column": 1,
                                            "offset": 9035
                                        },
                                        "end": {
                                            "line": 213,
                                            "column": 108,
                                            "offset": 9142
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 2,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Custom directive support",
                                            "position": {
                                                "start": {
                                                    "line": 215,
                                                    "column": 4,
                                                    "offset": 9147
                                                },
                                                "end": {
                                                    "line": 215,
                                                    "column": 28,
                                                    "offset": 9171
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 215,
                                            "column": 1,
                                            "offset": 9144
                                        },
                                        "end": {
                                            "line": 215,
                                            "column": 28,
                                            "offset": 9171
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "The ",
                                            "position": {
                                                "start": {
                                                    "line": 217,
                                                    "column": 1,
                                                    "offset": 9173
                                                },
                                                "end": {
                                                    "line": 217,
                                                    "column": 5,
                                                    "offset": 9177
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "@apollo/gateway",
                                            "position": {
                                                "start": {
                                                    "line": 217,
                                                    "column": 5,
                                                    "offset": 9177
                                                },
                                                "end": {
                                                    "line": 217,
                                                    "column": 22,
                                                    "offset": 9194
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " library supports the use of custom ",
                                            "position": {
                                                "start": {
                                                    "line": 217,
                                                    "column": 22,
                                                    "offset": 9194
                                                },
                                                "end": {
                                                    "line": 217,
                                                    "column": 58,
                                                    "offset": 9230
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "link",
                                            "title": null,
                                            "url": "https://www.apollographql.com/docs/apollo-server/schema/directives/",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "directives",
                                                    "position": {
                                                        "start": {
                                                            "line": 217,
                                                            "column": 59,
                                                            "offset": 9231
                                                        },
                                                        "end": {
                                                            "line": 217,
                                                            "column": 69,
                                                            "offset": 9241
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 217,
                                                    "column": 58,
                                                    "offset": 9230
                                                },
                                                "end": {
                                                    "line": 217,
                                                    "column": 139,
                                                    "offset": 9311
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " in your implementing service schemas. This support differs depending on whether a given directive is a ",
                                            "position": {
                                                "start": {
                                                    "line": 217,
                                                    "column": 139,
                                                    "offset": 9311
                                                },
                                                "end": {
                                                    "line": 217,
                                                    "column": 243,
                                                    "offset": 9415
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "strong",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "type system directive",
                                                    "position": {
                                                        "start": {
                                                            "line": 217,
                                                            "column": 245,
                                                            "offset": 9417
                                                        },
                                                        "end": {
                                                            "line": 217,
                                                            "column": 266,
                                                            "offset": 9438
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 217,
                                                    "column": 243,
                                                    "offset": 9415
                                                },
                                                "end": {
                                                    "line": 217,
                                                    "column": 268,
                                                    "offset": 9440
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " or an ",
                                            "position": {
                                                "start": {
                                                    "line": 217,
                                                    "column": 268,
                                                    "offset": 9440
                                                },
                                                "end": {
                                                    "line": 217,
                                                    "column": 275,
                                                    "offset": 9447
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "strong",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "executable directive",
                                                    "position": {
                                                        "start": {
                                                            "line": 217,
                                                            "column": 277,
                                                            "offset": 9449
                                                        },
                                                        "end": {
                                                            "line": 217,
                                                            "column": 297,
                                                            "offset": 9469
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 217,
                                                    "column": 275,
                                                    "offset": 9447
                                                },
                                                "end": {
                                                    "line": 217,
                                                    "column": 299,
                                                    "offset": 9471
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ".",
                                            "position": {
                                                "start": {
                                                    "line": 217,
                                                    "column": 299,
                                                    "offset": 9471
                                                },
                                                "end": {
                                                    "line": 217,
                                                    "column": 300,
                                                    "offset": 9472
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 217,
                                            "column": 1,
                                            "offset": 9173
                                        },
                                        "end": {
                                            "line": 217,
                                            "column": 300,
                                            "offset": 9472
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 3,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Type system directives",
                                            "position": {
                                                "start": {
                                                    "line": 219,
                                                    "column": 5,
                                                    "offset": 9478
                                                },
                                                "end": {
                                                    "line": 219,
                                                    "column": 27,
                                                    "offset": 9500
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 219,
                                            "column": 1,
                                            "offset": 9474
                                        },
                                        "end": {
                                            "line": 219,
                                            "column": 27,
                                            "offset": 9500
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Type system directives are directives that are applied to one of ",
                                            "position": {
                                                "start": {
                                                    "line": 221,
                                                    "column": 1,
                                                    "offset": 9502
                                                },
                                                "end": {
                                                    "line": 221,
                                                    "column": 66,
                                                    "offset": 9567
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "link",
                                            "title": null,
                                            "url": "http://spec.graphql.org/June2018/#TypeSystemDirectiveLocation",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "these locations",
                                                    "position": {
                                                        "start": {
                                                            "line": 221,
                                                            "column": 67,
                                                            "offset": 9568
                                                        },
                                                        "end": {
                                                            "line": 221,
                                                            "column": 82,
                                                            "offset": 9583
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 221,
                                                    "column": 66,
                                                    "offset": 9567
                                                },
                                                "end": {
                                                    "line": 221,
                                                    "column": 146,
                                                    "offset": 9647
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ". These directives are ",
                                            "position": {
                                                "start": {
                                                    "line": 221,
                                                    "column": 146,
                                                    "offset": 9647
                                                },
                                                "end": {
                                                    "line": 221,
                                                    "column": 169,
                                                    "offset": 9670
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "emphasis",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "not",
                                                    "position": {
                                                        "start": {
                                                            "line": 221,
                                                            "column": 170,
                                                            "offset": 9671
                                                        },
                                                        "end": {
                                                            "line": 221,
                                                            "column": 173,
                                                            "offset": 9674
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 221,
                                                    "column": 169,
                                                    "offset": 9670
                                                },
                                                "end": {
                                                    "line": 221,
                                                    "column": 174,
                                                    "offset": 9675
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " used within operations, but rather are applied to locations within the schema itself.",
                                            "position": {
                                                "start": {
                                                    "line": 221,
                                                    "column": 174,
                                                    "offset": 9675
                                                },
                                                "end": {
                                                    "line": 221,
                                                    "column": 260,
                                                    "offset": 9761
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 221,
                                            "column": 1,
                                            "offset": 9502
                                        },
                                        "end": {
                                            "line": 221,
                                            "column": 260,
                                            "offset": 9761
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "The ",
                                            "position": {
                                                "start": {
                                                    "line": 223,
                                                    "column": 1,
                                                    "offset": 9763
                                                },
                                                "end": {
                                                    "line": 223,
                                                    "column": 5,
                                                    "offset": 9767
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "@deprecated",
                                            "position": {
                                                "start": {
                                                    "line": 223,
                                                    "column": 5,
                                                    "offset": 9767
                                                },
                                                "end": {
                                                    "line": 223,
                                                    "column": 18,
                                                    "offset": 9780
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " directive below is an example of a type system directive:",
                                            "position": {
                                                "start": {
                                                    "line": 223,
                                                    "column": 18,
                                                    "offset": 9780
                                                },
                                                "end": {
                                                    "line": 223,
                                                    "column": 76,
                                                    "offset": 9838
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 223,
                                            "column": 1,
                                            "offset": 9763
                                        },
                                        "end": {
                                            "line": 223,
                                            "column": 76,
                                            "offset": 9838
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "graphql",
                                    "meta": null,
                                    "value": "directive @deprecated(\n  reason: String = \"No longer supported\"\n) on FIELD_DEFINITION | ENUM_VALUE\n\ntype ExampleType {\n  newField: String\n  oldField: String @deprecated(reason: \"Use `newField`.\")\n}",
                                    "position": {
                                        "start": {
                                            "line": 225,
                                            "column": 1,
                                            "offset": 9840
                                        },
                                        "end": {
                                            "line": 234,
                                            "column": 4,
                                            "offset": 10052
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "At composition time, ",
                                            "position": {
                                                "start": {
                                                    "line": 236,
                                                    "column": 1,
                                                    "offset": 10054
                                                },
                                                "end": {
                                                    "line": 236,
                                                    "column": 22,
                                                    "offset": 10075
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "ApolloGateway",
                                            "position": {
                                                "start": {
                                                    "line": 236,
                                                    "column": 22,
                                                    "offset": 10075
                                                },
                                                "end": {
                                                    "line": 236,
                                                    "column": 37,
                                                    "offset": 10090
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " strips all definitions ",
                                            "position": {
                                                "start": {
                                                    "line": 236,
                                                    "column": 37,
                                                    "offset": 10090
                                                },
                                                "end": {
                                                    "line": 236,
                                                    "column": 61,
                                                    "offset": 10114
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "emphasis",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "and",
                                                    "position": {
                                                        "start": {
                                                            "line": 236,
                                                            "column": 62,
                                                            "offset": 10115
                                                        },
                                                        "end": {
                                                            "line": 236,
                                                            "column": 65,
                                                            "offset": 10118
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 236,
                                                    "column": 61,
                                                    "offset": 10114
                                                },
                                                "end": {
                                                    "line": 236,
                                                    "column": 66,
                                                    "offset": 10119
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " uses of type system directives from your composed schema. This has no effect on your implementing service schemas, which retain this information.",
                                            "position": {
                                                "start": {
                                                    "line": 236,
                                                    "column": 66,
                                                    "offset": 10119
                                                },
                                                "end": {
                                                    "line": 236,
                                                    "column": 212,
                                                    "offset": 10265
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 236,
                                            "column": 1,
                                            "offset": 10054
                                        },
                                        "end": {
                                            "line": 236,
                                            "column": 212,
                                            "offset": 10265
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Effectively, the gateway supports type system directives by ",
                                            "position": {
                                                "start": {
                                                    "line": 238,
                                                    "column": 1,
                                                    "offset": 10267
                                                },
                                                "end": {
                                                    "line": 238,
                                                    "column": 61,
                                                    "offset": 10327
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "emphasis",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "ignoring",
                                                    "position": {
                                                        "start": {
                                                            "line": 238,
                                                            "column": 62,
                                                            "offset": 10328
                                                        },
                                                        "end": {
                                                            "line": 238,
                                                            "column": 70,
                                                            "offset": 10336
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 238,
                                                    "column": 61,
                                                    "offset": 10327
                                                },
                                                "end": {
                                                    "line": 238,
                                                    "column": 71,
                                                    "offset": 10337
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " them, making them the responsibility of the implementing services that define them.",
                                            "position": {
                                                "start": {
                                                    "line": 238,
                                                    "column": 71,
                                                    "offset": 10337
                                                },
                                                "end": {
                                                    "line": 238,
                                                    "column": 155,
                                                    "offset": 10421
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 238,
                                            "column": 1,
                                            "offset": 10267
                                        },
                                        "end": {
                                            "line": 238,
                                            "column": 155,
                                            "offset": 10421
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 3,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Executable directives",
                                            "position": {
                                                "start": {
                                                    "line": 240,
                                                    "column": 5,
                                                    "offset": 10427
                                                },
                                                "end": {
                                                    "line": 240,
                                                    "column": 26,
                                                    "offset": 10448
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 240,
                                            "column": 1,
                                            "offset": 10423
                                        },
                                        "end": {
                                            "line": 240,
                                            "column": 26,
                                            "offset": 10448
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Executable directives are directives that are applied to one of ",
                                            "position": {
                                                "start": {
                                                    "line": 242,
                                                    "column": 1,
                                                    "offset": 10450
                                                },
                                                "end": {
                                                    "line": 242,
                                                    "column": 65,
                                                    "offset": 10514
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "link",
                                            "title": null,
                                            "url": "http://spec.graphql.org/June2018/#ExecutableDirectiveLocation",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "these locations",
                                                    "position": {
                                                        "start": {
                                                            "line": 242,
                                                            "column": 66,
                                                            "offset": 10515
                                                        },
                                                        "end": {
                                                            "line": 242,
                                                            "column": 81,
                                                            "offset": 10530
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 242,
                                                    "column": 65,
                                                    "offset": 10514
                                                },
                                                "end": {
                                                    "line": 242,
                                                    "column": 145,
                                                    "offset": 10594
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ". These directives are ",
                                            "position": {
                                                "start": {
                                                    "line": 242,
                                                    "column": 145,
                                                    "offset": 10594
                                                },
                                                "end": {
                                                    "line": 242,
                                                    "column": 168,
                                                    "offset": 10617
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "emphasis",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "defined",
                                                    "position": {
                                                        "start": {
                                                            "line": 242,
                                                            "column": 169,
                                                            "offset": 10618
                                                        },
                                                        "end": {
                                                            "line": 242,
                                                            "column": 176,
                                                            "offset": 10625
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 242,
                                                    "column": 168,
                                                    "offset": 10617
                                                },
                                                "end": {
                                                    "line": 242,
                                                    "column": 177,
                                                    "offset": 10626
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " in your schema, but they're ",
                                            "position": {
                                                "start": {
                                                    "line": 242,
                                                    "column": 177,
                                                    "offset": 10626
                                                },
                                                "end": {
                                                    "line": 242,
                                                    "column": 206,
                                                    "offset": 10655
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "emphasis",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "used",
                                                    "position": {
                                                        "start": {
                                                            "line": 242,
                                                            "column": 207,
                                                            "offset": 10656
                                                        },
                                                        "end": {
                                                            "line": 242,
                                                            "column": 211,
                                                            "offset": 10660
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 242,
                                                    "column": 206,
                                                    "offset": 10655
                                                },
                                                "end": {
                                                    "line": 242,
                                                    "column": 212,
                                                    "offset": 10661
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " in operations that are sent by clients.",
                                            "position": {
                                                "start": {
                                                    "line": 242,
                                                    "column": 212,
                                                    "offset": 10661
                                                },
                                                "end": {
                                                    "line": 242,
                                                    "column": 252,
                                                    "offset": 10701
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 242,
                                            "column": 1,
                                            "offset": 10450
                                        },
                                        "end": {
                                            "line": 242,
                                            "column": 252,
                                            "offset": 10701
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "blockquote",
                                    "children": [
                                        {
                                            "type": "paragraph",
                                            "children": [
                                                {
                                                    "type": "strong",
                                                    "children": [
                                                        {
                                                            "type": "text",
                                                            "value": "Although the ",
                                                            "position": {
                                                                "start": {
                                                                    "line": 244,
                                                                    "column": 4,
                                                                    "offset": 10706
                                                                },
                                                                "end": {
                                                                    "line": 244,
                                                                    "column": 17,
                                                                    "offset": 10719
                                                                },
                                                                "indent": []
                                                            }
                                                        },
                                                        {
                                                            "type": "inlineCode",
                                                            "value": "@apollo/gateway",
                                                            "position": {
                                                                "start": {
                                                                    "line": 244,
                                                                    "column": 17,
                                                                    "offset": 10719
                                                                },
                                                                "end": {
                                                                    "line": 244,
                                                                    "column": 34,
                                                                    "offset": 10736
                                                                },
                                                                "indent": []
                                                            }
                                                        },
                                                        {
                                                            "type": "text",
                                                            "value": " library supports executable directives, Apollo Server itself does not",
                                                            "position": {
                                                                "start": {
                                                                    "line": 244,
                                                                    "column": 34,
                                                                    "offset": 10736
                                                                },
                                                                "end": {
                                                                    "line": 244,
                                                                    "column": 104,
                                                                    "offset": 10806
                                                                },
                                                                "indent": []
                                                            }
                                                        }
                                                    ],
                                                    "position": {
                                                        "start": {
                                                            "line": 244,
                                                            "column": 2,
                                                            "offset": 10704
                                                        },
                                                        "end": {
                                                            "line": 244,
                                                            "column": 106,
                                                            "offset": 10808
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": ". This guidance is provided primarily for architectures that use the ",
                                                    "position": {
                                                        "start": {
                                                            "line": 244,
                                                            "column": 106,
                                                            "offset": 10808
                                                        },
                                                        "end": {
                                                            "line": 244,
                                                            "column": 175,
                                                            "offset": 10877
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "inlineCode",
                                                    "value": "@apollo/gateway",
                                                    "position": {
                                                        "start": {
                                                            "line": 244,
                                                            "column": 175,
                                                            "offset": 10877
                                                        },
                                                        "end": {
                                                            "line": 244,
                                                            "column": 192,
                                                            "offset": 10894
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": " library in combination with implementing services that do ",
                                                    "position": {
                                                        "start": {
                                                            "line": 244,
                                                            "column": 192,
                                                            "offset": 10894
                                                        },
                                                        "end": {
                                                            "line": 244,
                                                            "column": 251,
                                                            "offset": 10953
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "emphasis",
                                                    "children": [
                                                        {
                                                            "type": "text",
                                                            "value": "not",
                                                            "position": {
                                                                "start": {
                                                                    "line": 244,
                                                                    "column": 252,
                                                                    "offset": 10954
                                                                },
                                                                "end": {
                                                                    "line": 244,
                                                                    "column": 255,
                                                                    "offset": 10957
                                                                },
                                                                "indent": []
                                                            }
                                                        }
                                                    ],
                                                    "position": {
                                                        "start": {
                                                            "line": 244,
                                                            "column": 251,
                                                            "offset": 10953
                                                        },
                                                        "end": {
                                                            "line": 244,
                                                            "column": 256,
                                                            "offset": 10958
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": " use Apollo Server.",
                                                    "position": {
                                                        "start": {
                                                            "line": 244,
                                                            "column": 256,
                                                            "offset": 10958
                                                        },
                                                        "end": {
                                                            "line": 244,
                                                            "column": 275,
                                                            "offset": 10977
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 244,
                                                    "column": 2,
                                                    "offset": 10704
                                                },
                                                "end": {
                                                    "line": 244,
                                                    "column": 275,
                                                    "offset": 10977
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 244,
                                            "column": 1,
                                            "offset": 10703
                                        },
                                        "end": {
                                            "line": 244,
                                            "column": 275,
                                            "offset": 10977
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Here's an example of an executable directive definition:",
                                            "position": {
                                                "start": {
                                                    "line": 246,
                                                    "column": 1,
                                                    "offset": 10979
                                                },
                                                "end": {
                                                    "line": 246,
                                                    "column": 57,
                                                    "offset": 11035
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 246,
                                            "column": 1,
                                            "offset": 10979
                                        },
                                        "end": {
                                            "line": 246,
                                            "column": 57,
                                            "offset": 11035
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "graphql",
                                    "meta": null,
                                    "value": "# Uppercase this field's value (assuming it's a string)\ndirective @uppercase on FIELD",
                                    "position": {
                                        "start": {
                                            "line": 248,
                                            "column": 1,
                                            "offset": 11037
                                        },
                                        "end": {
                                            "line": 251,
                                            "column": 4,
                                            "offset": 11137
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "And here's an example of a query that uses that directive:",
                                            "position": {
                                                "start": {
                                                    "line": 253,
                                                    "column": 1,
                                                    "offset": 11139
                                                },
                                                "end": {
                                                    "line": 253,
                                                    "column": 59,
                                                    "offset": 11197
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 253,
                                            "column": 1,
                                            "offset": 11139
                                        },
                                        "end": {
                                            "line": 253,
                                            "column": 59,
                                            "offset": 11197
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "graphql",
                                    "meta": null,
                                    "value": "query GetUppercaseUsernames {\n  users {\n    name @uppercase\n  }\n}",
                                    "position": {
                                        "start": {
                                            "line": 255,
                                            "column": 1,
                                            "offset": 11199
                                        },
                                        "end": {
                                            "line": 261,
                                            "column": 4,
                                            "offset": 11279
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "At composition time, ",
                                            "position": {
                                                "start": {
                                                    "line": 263,
                                                    "column": 1,
                                                    "offset": 11281
                                                },
                                                "end": {
                                                    "line": 263,
                                                    "column": 22,
                                                    "offset": 11302
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "ApolloGateway",
                                            "position": {
                                                "start": {
                                                    "line": 263,
                                                    "column": 22,
                                                    "offset": 11302
                                                },
                                                "end": {
                                                    "line": 263,
                                                    "column": 37,
                                                    "offset": 11317
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " makes sure that ",
                                            "position": {
                                                "start": {
                                                    "line": 263,
                                                    "column": 37,
                                                    "offset": 11317
                                                },
                                                "end": {
                                                    "line": 263,
                                                    "column": 54,
                                                    "offset": 11334
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "strong",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "all of your implementing services define the exact same set of executable directives",
                                                    "position": {
                                                        "start": {
                                                            "line": 263,
                                                            "column": 56,
                                                            "offset": 11336
                                                        },
                                                        "end": {
                                                            "line": 263,
                                                            "column": 140,
                                                            "offset": 11420
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 263,
                                                    "column": 54,
                                                    "offset": 11334
                                                },
                                                "end": {
                                                    "line": 263,
                                                    "column": 142,
                                                    "offset": 11422
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ". If any service is missing a definition, or if definitions differ in their locations, arguments, or argument types, a composition error occurs.",
                                            "position": {
                                                "start": {
                                                    "line": 263,
                                                    "column": 142,
                                                    "offset": 11422
                                                },
                                                "end": {
                                                    "line": 263,
                                                    "column": 286,
                                                    "offset": 11566
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 263,
                                            "column": 1,
                                            "offset": 11281
                                        },
                                        "end": {
                                            "line": 263,
                                            "column": 286,
                                            "offset": 11566
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "blockquote",
                                    "children": [
                                        {
                                            "type": "paragraph",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "It's strongly recommended that all of your implementing services also use the exact same ",
                                                    "position": {
                                                        "start": {
                                                            "line": 265,
                                                            "column": 3,
                                                            "offset": 11570
                                                        },
                                                        "end": {
                                                            "line": 265,
                                                            "column": 92,
                                                            "offset": 11659
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "emphasis",
                                                    "children": [
                                                        {
                                                            "type": "text",
                                                            "value": "logic",
                                                            "position": {
                                                                "start": {
                                                                    "line": 265,
                                                                    "column": 93,
                                                                    "offset": 11660
                                                                },
                                                                "end": {
                                                                    "line": 265,
                                                                    "column": 98,
                                                                    "offset": 11665
                                                                },
                                                                "indent": []
                                                            }
                                                        }
                                                    ],
                                                    "position": {
                                                        "start": {
                                                            "line": 265,
                                                            "column": 92,
                                                            "offset": 11659
                                                        },
                                                        "end": {
                                                            "line": 265,
                                                            "column": 99,
                                                            "offset": 11666
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": " for a given executable directive. Otherwise, operations might produce inconsistent or confusing results for clients.",
                                                    "position": {
                                                        "start": {
                                                            "line": 265,
                                                            "column": 99,
                                                            "offset": 11666
                                                        },
                                                        "end": {
                                                            "line": 265,
                                                            "column": 216,
                                                            "offset": 11783
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 265,
                                                    "column": 3,
                                                    "offset": 11570
                                                },
                                                "end": {
                                                    "line": 265,
                                                    "column": 216,
                                                    "offset": 11783
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 265,
                                            "column": 1,
                                            "offset": 11568
                                        },
                                        "end": {
                                            "line": 265,
                                            "column": 216,
                                            "offset": 11783
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "export",
                                    "value": "export const _frontmatter = {\"title\":\"The gateway\"}",
                                    "position": {
                                        "start": {
                                            "line": 268,
                                            "column": 1,
                                            "offset": 11786
                                        },
                                        "end": {
                                            "line": 268,
                                            "column": 52,
                                            "offset": 11837
                                        },
                                        "indent": []
                                    }
                                }
                            ],
                            "position": {
                                "start": {
                                    "line": 1,
                                    "column": 1,
                                    "offset": 0
                                },
                                "end": {
                                    "line": 268,
                                    "column": 52,
                                    "offset": 11837
                                }
                            }
                        }
                    }
                },
                {
                    "node": {
                        "excerpt": "This article describes how to create an  implementing service  (also known as a  subgraph ) for aâ€¦",
                        "id": "233adb11-9ba0-52bf-9424-b4547ab93dea",
                        "fields": {
                            "slug": "/implementing-services/",
                            "sidebarTitle": "",
                            "apiReference": false
                        },
                        "mdxAST": {
                            "type": "root",
                            "children": [
                                {
                                    "type": "import",
                                    "value": "import FederationArchitecture from '../shared/diagrams/federation-architecture.mdx';",
                                    "position": {
                                        "start": {
                                            "line": 2,
                                            "column": 1,
                                            "offset": 1
                                        },
                                        "end": {
                                            "line": 2,
                                            "column": 85,
                                            "offset": 85
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "import",
                                    "value": "import {\n  ExpansionPanel,\n} from 'gatsby-theme-apollo-docs/src/components/expansion-panel';",
                                    "position": {
                                        "start": {
                                            "line": 4,
                                            "column": 1,
                                            "offset": 87
                                        },
                                        "end": {
                                            "line": 6,
                                            "column": 66,
                                            "offset": 179
                                        },
                                        "indent": [
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "This article describes how to create an ",
                                            "position": {
                                                "start": {
                                                    "line": 8,
                                                    "column": 1,
                                                    "offset": 181
                                                },
                                                "end": {
                                                    "line": 8,
                                                    "column": 41,
                                                    "offset": 221
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "strong",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "implementing service",
                                                    "position": {
                                                        "start": {
                                                            "line": 8,
                                                            "column": 43,
                                                            "offset": 223
                                                        },
                                                        "end": {
                                                            "line": 8,
                                                            "column": 63,
                                                            "offset": 243
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 8,
                                                    "column": 41,
                                                    "offset": 221
                                                },
                                                "end": {
                                                    "line": 8,
                                                    "column": 65,
                                                    "offset": 245
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " (also known as a ",
                                            "position": {
                                                "start": {
                                                    "line": 8,
                                                    "column": 65,
                                                    "offset": 245
                                                },
                                                "end": {
                                                    "line": 8,
                                                    "column": 83,
                                                    "offset": 263
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "strong",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "subgraph",
                                                    "position": {
                                                        "start": {
                                                            "line": 8,
                                                            "column": 85,
                                                            "offset": 265
                                                        },
                                                        "end": {
                                                            "line": 8,
                                                            "column": 93,
                                                            "offset": 273
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 8,
                                                    "column": 83,
                                                    "offset": 263
                                                },
                                                "end": {
                                                    "line": 8,
                                                    "column": 95,
                                                    "offset": 275
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ") for a federated data graph using Apollo Server.",
                                            "position": {
                                                "start": {
                                                    "line": 8,
                                                    "column": 95,
                                                    "offset": 275
                                                },
                                                "end": {
                                                    "line": 8,
                                                    "column": 144,
                                                    "offset": 324
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 8,
                                            "column": 1,
                                            "offset": 181
                                        },
                                        "end": {
                                            "line": 8,
                                            "column": 144,
                                            "offset": 324
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 2,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Defining an implementing service",
                                            "position": {
                                                "start": {
                                                    "line": 10,
                                                    "column": 4,
                                                    "offset": 329
                                                },
                                                "end": {
                                                    "line": 10,
                                                    "column": 36,
                                                    "offset": 361
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 10,
                                            "column": 1,
                                            "offset": 326
                                        },
                                        "end": {
                                            "line": 10,
                                            "column": 36,
                                            "offset": 361
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "blockquote",
                                    "children": [
                                        {
                                            "type": "paragraph",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "To be part of a federated graph, an implementing service must conform to the ",
                                                    "position": {
                                                        "start": {
                                                            "line": 12,
                                                            "column": 3,
                                                            "offset": 365
                                                        },
                                                        "end": {
                                                            "line": 12,
                                                            "column": 80,
                                                            "offset": 442
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "link",
                                                    "title": null,
                                                    "url": "/federation-spec/",
                                                    "children": [
                                                        {
                                                            "type": "text",
                                                            "value": "Apollo Federation specification",
                                                            "position": {
                                                                "start": {
                                                                    "line": 12,
                                                                    "column": 81,
                                                                    "offset": 443
                                                                },
                                                                "end": {
                                                                    "line": 12,
                                                                    "column": 112,
                                                                    "offset": 474
                                                                },
                                                                "indent": []
                                                            }
                                                        }
                                                    ],
                                                    "position": {
                                                        "start": {
                                                            "line": 12,
                                                            "column": 80,
                                                            "offset": 442
                                                        },
                                                        "end": {
                                                            "line": 12,
                                                            "column": 132,
                                                            "offset": 494
                                                        },
                                                        "indent": []
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "value": ", which exposes the service's capabilities to the gateway, as well as to tools like Apollo Studio.",
                                                    "position": {
                                                        "start": {
                                                            "line": 12,
                                                            "column": 132,
                                                            "offset": 494
                                                        },
                                                        "end": {
                                                            "line": 12,
                                                            "column": 230,
                                                            "offset": 592
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 12,
                                                    "column": 3,
                                                    "offset": 365
                                                },
                                                "end": {
                                                    "line": 12,
                                                    "column": 230,
                                                    "offset": 592
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 12,
                                            "column": 1,
                                            "offset": 363
                                        },
                                        "end": {
                                            "line": 12,
                                            "column": 230,
                                            "offset": 592
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Converting an existing schema into an implementing service is the first step in building a federated graph. To start, here's a ",
                                            "position": {
                                                "start": {
                                                    "line": 14,
                                                    "column": 1,
                                                    "offset": 594
                                                },
                                                "end": {
                                                    "line": 14,
                                                    "column": 128,
                                                    "offset": 721
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "emphasis",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "non-federated",
                                                    "position": {
                                                        "start": {
                                                            "line": 14,
                                                            "column": 129,
                                                            "offset": 722
                                                        },
                                                        "end": {
                                                            "line": 14,
                                                            "column": 142,
                                                            "offset": 735
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 14,
                                                    "column": 128,
                                                    "offset": 721
                                                },
                                                "end": {
                                                    "line": 14,
                                                    "column": 143,
                                                    "offset": 736
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " Apollo Server setup:",
                                            "position": {
                                                "start": {
                                                    "line": 14,
                                                    "column": 143,
                                                    "offset": 736
                                                },
                                                "end": {
                                                    "line": 14,
                                                    "column": 164,
                                                    "offset": 757
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 14,
                                            "column": 1,
                                            "offset": 594
                                        },
                                        "end": {
                                            "line": 14,
                                            "column": 164,
                                            "offset": 757
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "javascript:title=index.js",
                                    "meta": null,
                                    "value": "const { ApolloServer, gql } = require('apollo-server');\n\nconst typeDefs = gql`\n  type Query {\n    me: User\n  }\n\n  type User {\n    id: ID!\n    username: String\n  }\n`;\n\nconst resolvers = {\n  Query: {\n    me() {\n      return { id: \"1\", username: \"@ava\" }\n    }\n  }\n};\n\nconst server = new ApolloServer({\n  typeDefs,\n  resolvers,\n});\n\nserver.listen(4001).then(({ url }) => {\n    console.log(`ðŸš€ Server ready at ${url}`);\n});",
                                    "position": {
                                        "start": {
                                            "line": 16,
                                            "column": 1,
                                            "offset": 759
                                        },
                                        "end": {
                                            "line": 46,
                                            "column": 4,
                                            "offset": 1211
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "This should look familiar if you've ",
                                            "position": {
                                                "start": {
                                                    "line": 48,
                                                    "column": 1,
                                                    "offset": 1213
                                                },
                                                "end": {
                                                    "line": 48,
                                                    "column": 37,
                                                    "offset": 1249
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "link",
                                            "title": null,
                                            "url": "https://www.apollographql.com/docs/apollo-server/getting-started/",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "set up Apollo Server",
                                                    "position": {
                                                        "start": {
                                                            "line": 48,
                                                            "column": 38,
                                                            "offset": 1250
                                                        },
                                                        "end": {
                                                            "line": 48,
                                                            "column": 58,
                                                            "offset": 1270
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 48,
                                                    "column": 37,
                                                    "offset": 1249
                                                },
                                                "end": {
                                                    "line": 48,
                                                    "column": 126,
                                                    "offset": 1338
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " before. If it doesn't, we recommend you familiarize yourself with the basics before jumping into federation.",
                                            "position": {
                                                "start": {
                                                    "line": 48,
                                                    "column": 126,
                                                    "offset": 1338
                                                },
                                                "end": {
                                                    "line": 48,
                                                    "column": 235,
                                                    "offset": 1447
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 48,
                                            "column": 1,
                                            "offset": 1213
                                        },
                                        "end": {
                                            "line": 48,
                                            "column": 235,
                                            "offset": 1447
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Now, let's convert this to an implementing service. The first step is to install the ",
                                            "position": {
                                                "start": {
                                                    "line": 50,
                                                    "column": 1,
                                                    "offset": 1449
                                                },
                                                "end": {
                                                    "line": 50,
                                                    "column": 86,
                                                    "offset": 1534
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "@apollo/federation",
                                            "position": {
                                                "start": {
                                                    "line": 50,
                                                    "column": 86,
                                                    "offset": 1534
                                                },
                                                "end": {
                                                    "line": 50,
                                                    "column": 106,
                                                    "offset": 1554
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " package in our project:",
                                            "position": {
                                                "start": {
                                                    "line": 50,
                                                    "column": 106,
                                                    "offset": 1554
                                                },
                                                "end": {
                                                    "line": 50,
                                                    "column": 130,
                                                    "offset": 1578
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 50,
                                            "column": 1,
                                            "offset": 1449
                                        },
                                        "end": {
                                            "line": 50,
                                            "column": 130,
                                            "offset": 1578
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "shell",
                                    "meta": null,
                                    "value": "npm install @apollo/federation",
                                    "position": {
                                        "start": {
                                            "line": 52,
                                            "column": 1,
                                            "offset": 1580
                                        },
                                        "end": {
                                            "line": 54,
                                            "column": 4,
                                            "offset": 1623
                                        },
                                        "indent": [
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 3,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Defining an entity",
                                            "position": {
                                                "start": {
                                                    "line": 56,
                                                    "column": 5,
                                                    "offset": 1629
                                                },
                                                "end": {
                                                    "line": 56,
                                                    "column": 23,
                                                    "offset": 1647
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 56,
                                            "column": 1,
                                            "offset": 1625
                                        },
                                        "end": {
                                            "line": 56,
                                            "column": 23,
                                            "offset": 1647
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "As part of our federated architecture, we want ",
                                            "position": {
                                                "start": {
                                                    "line": 58,
                                                    "column": 1,
                                                    "offset": 1649
                                                },
                                                "end": {
                                                    "line": 58,
                                                    "column": 48,
                                                    "offset": 1696
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "emphasis",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "other",
                                                    "position": {
                                                        "start": {
                                                            "line": 58,
                                                            "column": 49,
                                                            "offset": 1697
                                                        },
                                                        "end": {
                                                            "line": 58,
                                                            "column": 54,
                                                            "offset": 1702
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 58,
                                                    "column": 48,
                                                    "offset": 1696
                                                },
                                                "end": {
                                                    "line": 58,
                                                    "column": 55,
                                                    "offset": 1703
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " implementing services to be able to extend the ",
                                            "position": {
                                                "start": {
                                                    "line": 58,
                                                    "column": 55,
                                                    "offset": 1703
                                                },
                                                "end": {
                                                    "line": 58,
                                                    "column": 103,
                                                    "offset": 1751
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "User",
                                            "position": {
                                                "start": {
                                                    "line": 58,
                                                    "column": 103,
                                                    "offset": 1751
                                                },
                                                "end": {
                                                    "line": 58,
                                                    "column": 109,
                                                    "offset": 1757
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " type this service defines. To enable this, we add the ",
                                            "position": {
                                                "start": {
                                                    "line": 58,
                                                    "column": 109,
                                                    "offset": 1757
                                                },
                                                "end": {
                                                    "line": 58,
                                                    "column": 164,
                                                    "offset": 1812
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "@key",
                                            "position": {
                                                "start": {
                                                    "line": 58,
                                                    "column": 164,
                                                    "offset": 1812
                                                },
                                                "end": {
                                                    "line": 58,
                                                    "column": 170,
                                                    "offset": 1818
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " directive to the ",
                                            "position": {
                                                "start": {
                                                    "line": 58,
                                                    "column": 170,
                                                    "offset": 1818
                                                },
                                                "end": {
                                                    "line": 58,
                                                    "column": 188,
                                                    "offset": 1836
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "User",
                                            "position": {
                                                "start": {
                                                    "line": 58,
                                                    "column": 188,
                                                    "offset": 1836
                                                },
                                                "end": {
                                                    "line": 58,
                                                    "column": 194,
                                                    "offset": 1842
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " type's definition to designate it as an ",
                                            "position": {
                                                "start": {
                                                    "line": 58,
                                                    "column": 194,
                                                    "offset": 1842
                                                },
                                                "end": {
                                                    "line": 58,
                                                    "column": 235,
                                                    "offset": 1883
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "link",
                                            "title": null,
                                            "url": "./entities/",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "entity",
                                                    "position": {
                                                        "start": {
                                                            "line": 58,
                                                            "column": 236,
                                                            "offset": 1884
                                                        },
                                                        "end": {
                                                            "line": 58,
                                                            "column": 242,
                                                            "offset": 1890
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 58,
                                                    "column": 235,
                                                    "offset": 1883
                                                },
                                                "end": {
                                                    "line": 58,
                                                    "column": 256,
                                                    "offset": 1904
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ":",
                                            "position": {
                                                "start": {
                                                    "line": 58,
                                                    "column": 256,
                                                    "offset": 1904
                                                },
                                                "end": {
                                                    "line": 58,
                                                    "column": 257,
                                                    "offset": 1905
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 58,
                                            "column": 1,
                                            "offset": 1649
                                        },
                                        "end": {
                                            "line": 58,
                                            "column": 257,
                                            "offset": 1905
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "js:title=index.js",
                                    "meta": null,
                                    "value": "const { ApolloServer, gql } = require('apollo-server');\nconst { buildFederatedSchema } = require('@apollo/federation');\n\nconst typeDefs = gql`\n  type Query {\n    me: User\n  }\n\n  type User @key(fields: \"id\") {\n    id: ID!\n    username: String\n  }\n`;",
                                    "position": {
                                        "start": {
                                            "line": 60,
                                            "column": 1,
                                            "offset": 1907
                                        },
                                        "end": {
                                            "line": 74,
                                            "column": 4,
                                            "offset": 2180
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "The ",
                                            "position": {
                                                "start": {
                                                    "line": 76,
                                                    "column": 1,
                                                    "offset": 2182
                                                },
                                                "end": {
                                                    "line": 76,
                                                    "column": 5,
                                                    "offset": 2186
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "@key",
                                            "position": {
                                                "start": {
                                                    "line": 76,
                                                    "column": 5,
                                                    "offset": 2186
                                                },
                                                "end": {
                                                    "line": 76,
                                                    "column": 11,
                                                    "offset": 2192
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " directive tells other services which field(s) of the ",
                                            "position": {
                                                "start": {
                                                    "line": 76,
                                                    "column": 11,
                                                    "offset": 2192
                                                },
                                                "end": {
                                                    "line": 76,
                                                    "column": 65,
                                                    "offset": 2246
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "User",
                                            "position": {
                                                "start": {
                                                    "line": 76,
                                                    "column": 65,
                                                    "offset": 2246
                                                },
                                                "end": {
                                                    "line": 76,
                                                    "column": 71,
                                                    "offset": 2252
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " type to use\nto uniquely identify a particular instance. In this case, services should use the\nsingle field ",
                                            "position": {
                                                "start": {
                                                    "line": 76,
                                                    "column": 71,
                                                    "offset": 2252
                                                },
                                                "end": {
                                                    "line": 78,
                                                    "column": 14,
                                                    "offset": 2360
                                                },
                                                "indent": [
                                                    1,
                                                    1
                                                ]
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "id",
                                            "position": {
                                                "start": {
                                                    "line": 78,
                                                    "column": 14,
                                                    "offset": 2360
                                                },
                                                "end": {
                                                    "line": 78,
                                                    "column": 18,
                                                    "offset": 2364
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ".",
                                            "position": {
                                                "start": {
                                                    "line": 78,
                                                    "column": 18,
                                                    "offset": 2364
                                                },
                                                "end": {
                                                    "line": 78,
                                                    "column": 19,
                                                    "offset": 2365
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 76,
                                            "column": 1,
                                            "offset": 2182
                                        },
                                        "end": {
                                            "line": 78,
                                            "column": 19,
                                            "offset": 2365
                                        },
                                        "indent": [
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Next, we add a ",
                                            "position": {
                                                "start": {
                                                    "line": 80,
                                                    "column": 1,
                                                    "offset": 2367
                                                },
                                                "end": {
                                                    "line": 80,
                                                    "column": 16,
                                                    "offset": 2382
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "strong",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "reference resolver",
                                                    "position": {
                                                        "start": {
                                                            "line": 80,
                                                            "column": 18,
                                                            "offset": 2384
                                                        },
                                                        "end": {
                                                            "line": 80,
                                                            "column": 36,
                                                            "offset": 2402
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 80,
                                                    "column": 16,
                                                    "offset": 2382
                                                },
                                                "end": {
                                                    "line": 80,
                                                    "column": 38,
                                                    "offset": 2404
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " for the ",
                                            "position": {
                                                "start": {
                                                    "line": 80,
                                                    "column": 38,
                                                    "offset": 2404
                                                },
                                                "end": {
                                                    "line": 80,
                                                    "column": 47,
                                                    "offset": 2413
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "User",
                                            "position": {
                                                "start": {
                                                    "line": 80,
                                                    "column": 47,
                                                    "offset": 2413
                                                },
                                                "end": {
                                                    "line": 80,
                                                    "column": 53,
                                                    "offset": 2419
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " type. A reference resolver tells the gateway how to fetch an entity by its ",
                                            "position": {
                                                "start": {
                                                    "line": 80,
                                                    "column": 53,
                                                    "offset": 2419
                                                },
                                                "end": {
                                                    "line": 80,
                                                    "column": 129,
                                                    "offset": 2495
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "@key",
                                            "position": {
                                                "start": {
                                                    "line": 80,
                                                    "column": 129,
                                                    "offset": 2495
                                                },
                                                "end": {
                                                    "line": 80,
                                                    "column": 135,
                                                    "offset": 2501
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " fields:",
                                            "position": {
                                                "start": {
                                                    "line": 80,
                                                    "column": 135,
                                                    "offset": 2501
                                                },
                                                "end": {
                                                    "line": 80,
                                                    "column": 143,
                                                    "offset": 2509
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 80,
                                            "column": 1,
                                            "offset": 2367
                                        },
                                        "end": {
                                            "line": 80,
                                            "column": 143,
                                            "offset": 2509
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "js:title=index.js",
                                    "meta": null,
                                    "value": "const resolvers = {\n  Query: {\n    me() {\n      return { id: \"1\", username: \"@ava\" }\n    }\n  },\n  User: {\n    __resolveReference(user, { fetchUserById }){\n      return fetchUserById(user.id)\n    }\n  }\n};",
                                    "position": {
                                        "start": {
                                            "line": 82,
                                            "column": 1,
                                            "offset": 2511
                                        },
                                        "end": {
                                            "line": 95,
                                            "column": 4,
                                            "offset": 2739
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "(This example requires defining the ",
                                            "position": {
                                                "start": {
                                                    "line": 97,
                                                    "column": 1,
                                                    "offset": 2741
                                                },
                                                "end": {
                                                    "line": 97,
                                                    "column": 37,
                                                    "offset": 2777
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "fetchUserById",
                                            "position": {
                                                "start": {
                                                    "line": 97,
                                                    "column": 37,
                                                    "offset": 2777
                                                },
                                                "end": {
                                                    "line": 97,
                                                    "column": 52,
                                                    "offset": 2792
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " function to obtain the appropriate ",
                                            "position": {
                                                "start": {
                                                    "line": 97,
                                                    "column": 52,
                                                    "offset": 2792
                                                },
                                                "end": {
                                                    "line": 97,
                                                    "column": 88,
                                                    "offset": 2828
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "User",
                                            "position": {
                                                "start": {
                                                    "line": 97,
                                                    "column": 88,
                                                    "offset": 2828
                                                },
                                                "end": {
                                                    "line": 97,
                                                    "column": 94,
                                                    "offset": 2834
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " from our backing data store.)",
                                            "position": {
                                                "start": {
                                                    "line": 97,
                                                    "column": 94,
                                                    "offset": 2834
                                                },
                                                "end": {
                                                    "line": 97,
                                                    "column": 124,
                                                    "offset": 2864
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 97,
                                            "column": 1,
                                            "offset": 2741
                                        },
                                        "end": {
                                            "line": 97,
                                            "column": 124,
                                            "offset": 2864
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "blockquote",
                                    "children": [
                                        {
                                            "type": "paragraph",
                                            "children": [
                                                {
                                                    "type": "link",
                                                    "title": null,
                                                    "url": "./entities/",
                                                    "children": [
                                                        {
                                                            "type": "text",
                                                            "value": "Learn more about entities",
                                                            "position": {
                                                                "start": {
                                                                    "line": 99,
                                                                    "column": 4,
                                                                    "offset": 2869
                                                                },
                                                                "end": {
                                                                    "line": 99,
                                                                    "column": 29,
                                                                    "offset": 2894
                                                                },
                                                                "indent": []
                                                            }
                                                        }
                                                    ],
                                                    "position": {
                                                        "start": {
                                                            "line": 99,
                                                            "column": 3,
                                                            "offset": 2868
                                                        },
                                                        "end": {
                                                            "line": 99,
                                                            "column": 43,
                                                            "offset": 2908
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 99,
                                                    "column": 3,
                                                    "offset": 2868
                                                },
                                                "end": {
                                                    "line": 99,
                                                    "column": 43,
                                                    "offset": 2908
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 99,
                                            "column": 1,
                                            "offset": 2866
                                        },
                                        "end": {
                                            "line": 99,
                                            "column": 43,
                                            "offset": 2908
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 3,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Generating a federated schema",
                                            "position": {
                                                "start": {
                                                    "line": 101,
                                                    "column": 5,
                                                    "offset": 2914
                                                },
                                                "end": {
                                                    "line": 101,
                                                    "column": 34,
                                                    "offset": 2943
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 101,
                                            "column": 1,
                                            "offset": 2910
                                        },
                                        "end": {
                                            "line": 101,
                                            "column": 34,
                                            "offset": 2943
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Finally, we use the ",
                                            "position": {
                                                "start": {
                                                    "line": 103,
                                                    "column": 1,
                                                    "offset": 2945
                                                },
                                                "end": {
                                                    "line": 103,
                                                    "column": 21,
                                                    "offset": 2965
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "buildFederatedSchema",
                                            "position": {
                                                "start": {
                                                    "line": 103,
                                                    "column": 21,
                                                    "offset": 2965
                                                },
                                                "end": {
                                                    "line": 103,
                                                    "column": 43,
                                                    "offset": 2987
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " function from the ",
                                            "position": {
                                                "start": {
                                                    "line": 103,
                                                    "column": 43,
                                                    "offset": 2987
                                                },
                                                "end": {
                                                    "line": 103,
                                                    "column": 62,
                                                    "offset": 3006
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "@apollo/federation",
                                            "position": {
                                                "start": {
                                                    "line": 103,
                                                    "column": 62,
                                                    "offset": 3006
                                                },
                                                "end": {
                                                    "line": 103,
                                                    "column": 82,
                                                    "offset": 3026
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " package to augment our schema definition with federation support. We provide the result of this function to the ",
                                            "position": {
                                                "start": {
                                                    "line": 103,
                                                    "column": 82,
                                                    "offset": 3026
                                                },
                                                "end": {
                                                    "line": 103,
                                                    "column": 195,
                                                    "offset": 3139
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "ApolloServer",
                                            "position": {
                                                "start": {
                                                    "line": 103,
                                                    "column": 195,
                                                    "offset": 3139
                                                },
                                                "end": {
                                                    "line": 103,
                                                    "column": 209,
                                                    "offset": 3153
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " constructor:",
                                            "position": {
                                                "start": {
                                                    "line": 103,
                                                    "column": 209,
                                                    "offset": 3153
                                                },
                                                "end": {
                                                    "line": 103,
                                                    "column": 222,
                                                    "offset": 3166
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 103,
                                            "column": 1,
                                            "offset": 2945
                                        },
                                        "end": {
                                            "line": 103,
                                            "column": 222,
                                            "offset": 3166
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "js:title=index.js",
                                    "meta": null,
                                    "value": "const server = new ApolloServer({\n  schema: buildFederatedSchema([{ typeDefs, resolvers }])\n});\n\nserver.listen(4001).then(({ url }) => {\n    console.log(`ðŸš€ Server ready at ${url}`);\n});",
                                    "position": {
                                        "start": {
                                            "line": 105,
                                            "column": 1,
                                            "offset": 3168
                                        },
                                        "end": {
                                            "line": 113,
                                            "column": 4,
                                            "offset": 3379
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "The server is now ready to act as an implementing service in a federated data graph!",
                                            "position": {
                                                "start": {
                                                    "line": 115,
                                                    "column": 1,
                                                    "offset": 3381
                                                },
                                                "end": {
                                                    "line": 115,
                                                    "column": 85,
                                                    "offset": 3465
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 115,
                                            "column": 1,
                                            "offset": 3381
                                        },
                                        "end": {
                                            "line": 115,
                                            "column": 85,
                                            "offset": 3465
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 3,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Combined example",
                                            "position": {
                                                "start": {
                                                    "line": 117,
                                                    "column": 5,
                                                    "offset": 3471
                                                },
                                                "end": {
                                                    "line": 117,
                                                    "column": 21,
                                                    "offset": 3487
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 117,
                                            "column": 1,
                                            "offset": 3467
                                        },
                                        "end": {
                                            "line": 117,
                                            "column": 21,
                                            "offset": 3487
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Here are the snippets above combined (again, note that for this sample to be complete, you must define the ",
                                            "position": {
                                                "start": {
                                                    "line": 119,
                                                    "column": 1,
                                                    "offset": 3489
                                                },
                                                "end": {
                                                    "line": 119,
                                                    "column": 108,
                                                    "offset": 3596
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "fetchUserById",
                                            "position": {
                                                "start": {
                                                    "line": 119,
                                                    "column": 108,
                                                    "offset": 3596
                                                },
                                                "end": {
                                                    "line": 119,
                                                    "column": 123,
                                                    "offset": 3611
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " function for your data source):",
                                            "position": {
                                                "start": {
                                                    "line": 119,
                                                    "column": 123,
                                                    "offset": 3611
                                                },
                                                "end": {
                                                    "line": 119,
                                                    "column": 155,
                                                    "offset": 3643
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 119,
                                            "column": 1,
                                            "offset": 3489
                                        },
                                        "end": {
                                            "line": 119,
                                            "column": 155,
                                            "offset": 3643
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "js:title=index.js",
                                    "meta": null,
                                    "value": "const { ApolloServer, gql } = require('apollo-server');\nconst { buildFederatedSchema } = require('@apollo/federation');\n\nconst typeDefs = gql`\n  type Query {\n    me: User\n  }\n\n  type User @key(fields: \"id\") {\n    id: ID!\n    username: String\n  }\n`;\n\nconst resolvers = {\n  Query: {\n    me() {\n      return { id: \"1\", username: \"@ava\" }\n    }\n  },\n  User: {\n    __resolveReference(user, { fetchUserById }){\n      return fetchUserById(user.id)\n    }\n  }\n}\n\nconst server = new ApolloServer({\n  schema: buildFederatedSchema([{ typeDefs, resolvers }])\n});\n\nserver.listen(4001).then(({ url }) => {\n    console.log(`ðŸš€ Server ready at ${url}`);\n});",
                                    "position": {
                                        "start": {
                                            "line": 121,
                                            "column": 1,
                                            "offset": 3645
                                        },
                                        "end": {
                                            "line": 156,
                                            "column": 4,
                                            "offset": 4310
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 2,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Defining custom directives",
                                            "position": {
                                                "start": {
                                                    "line": 158,
                                                    "column": 4,
                                                    "offset": 4315
                                                },
                                                "end": {
                                                    "line": 158,
                                                    "column": 30,
                                                    "offset": 4341
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 158,
                                            "column": 1,
                                            "offset": 4312
                                        },
                                        "end": {
                                            "line": 158,
                                            "column": 30,
                                            "offset": 4341
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "The method for defining ",
                                            "position": {
                                                "start": {
                                                    "line": 160,
                                                    "column": 1,
                                                    "offset": 4343
                                                },
                                                "end": {
                                                    "line": 160,
                                                    "column": 25,
                                                    "offset": 4367
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "link",
                                            "title": null,
                                            "url": "https://www.apollographql.com/docs/apollo-server/schema/creating-directives/",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "custom directives",
                                                    "position": {
                                                        "start": {
                                                            "line": 160,
                                                            "column": 26,
                                                            "offset": 4368
                                                        },
                                                        "end": {
                                                            "line": 160,
                                                            "column": 43,
                                                            "offset": 4385
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 160,
                                                    "column": 25,
                                                    "offset": 4367
                                                },
                                                "end": {
                                                    "line": 160,
                                                    "column": 122,
                                                    "offset": 4464
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " differs slightly in Apollo Federation.",
                                            "position": {
                                                "start": {
                                                    "line": 160,
                                                    "column": 122,
                                                    "offset": 4464
                                                },
                                                "end": {
                                                    "line": 160,
                                                    "column": 161,
                                                    "offset": 4503
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 160,
                                            "column": 1,
                                            "offset": 4343
                                        },
                                        "end": {
                                            "line": 160,
                                            "column": 161,
                                            "offset": 4503
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "strong",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "Without Apollo Federation",
                                                    "position": {
                                                        "start": {
                                                            "line": 162,
                                                            "column": 3,
                                                            "offset": 4507
                                                        },
                                                        "end": {
                                                            "line": 162,
                                                            "column": 28,
                                                            "offset": 4532
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 162,
                                                    "column": 1,
                                                    "offset": 4505
                                                },
                                                "end": {
                                                    "line": 162,
                                                    "column": 30,
                                                    "offset": 4534
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ", you provide your directive definitions to the constructor of ",
                                            "position": {
                                                "start": {
                                                    "line": 162,
                                                    "column": 30,
                                                    "offset": 4534
                                                },
                                                "end": {
                                                    "line": 162,
                                                    "column": 93,
                                                    "offset": 4597
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "ApolloServer",
                                            "position": {
                                                "start": {
                                                    "line": 162,
                                                    "column": 93,
                                                    "offset": 4597
                                                },
                                                "end": {
                                                    "line": 162,
                                                    "column": 107,
                                                    "offset": 4611
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " in the ",
                                            "position": {
                                                "start": {
                                                    "line": 162,
                                                    "column": 107,
                                                    "offset": 4611
                                                },
                                                "end": {
                                                    "line": 162,
                                                    "column": 115,
                                                    "offset": 4619
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "schemaDirectives",
                                            "position": {
                                                "start": {
                                                    "line": 162,
                                                    "column": 115,
                                                    "offset": 4619
                                                },
                                                "end": {
                                                    "line": 162,
                                                    "column": 133,
                                                    "offset": 4637
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " argument, like so:",
                                            "position": {
                                                "start": {
                                                    "line": 162,
                                                    "column": 133,
                                                    "offset": 4637
                                                },
                                                "end": {
                                                    "line": 162,
                                                    "column": 152,
                                                    "offset": 4656
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 162,
                                            "column": 1,
                                            "offset": 4505
                                        },
                                        "end": {
                                            "line": 162,
                                            "column": 152,
                                            "offset": 4656
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "jsx",
                                    "value": "<ExpansionPanel title=\"Expand example\">",
                                    "position": {
                                        "start": {
                                            "line": 164,
                                            "column": 1,
                                            "offset": 4658
                                        },
                                        "end": {
                                            "line": 164,
                                            "column": 40,
                                            "offset": 4697
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "js{15-17}",
                                    "meta": null,
                                    "value": "const { ApolloServer, gql, SchemaDirectiveVisitor } = require(\"apollo-server\");\n\n// typeDefs and resolvers defined here\n\nclass DeprecatedDirective extends SchemaDirectiveVisitor {\n  public visitFieldDefinition(field: GraphQLField<any, any>) {\n    field.isDeprecated = true;\n    field.deprecationReason = this.args.reason;\n  }\n}\n\nconst server = new ApolloServer({\n  typeDefs,\n  resolvers,\n  schemaDirectives: {\n    deprecated: DeprecatedDirective\n  }\n});",
                                    "position": {
                                        "start": {
                                            "line": 166,
                                            "column": 1,
                                            "offset": 4699
                                        },
                                        "end": {
                                            "line": 185,
                                            "column": 4,
                                            "offset": 5169
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "jsx",
                                    "value": "</ExpansionPanel>",
                                    "position": {
                                        "start": {
                                            "line": 187,
                                            "column": 1,
                                            "offset": 5171
                                        },
                                        "end": {
                                            "line": 187,
                                            "column": 18,
                                            "offset": 5188
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "strong",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "With Apollo Federation",
                                                    "position": {
                                                        "start": {
                                                            "line": 189,
                                                            "column": 3,
                                                            "offset": 5192
                                                        },
                                                        "end": {
                                                            "line": 189,
                                                            "column": 25,
                                                            "offset": 5214
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 189,
                                                    "column": 1,
                                                    "offset": 5190
                                                },
                                                "end": {
                                                    "line": 189,
                                                    "column": 27,
                                                    "offset": 5216
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ", you instead call ",
                                            "position": {
                                                "start": {
                                                    "line": 189,
                                                    "column": 27,
                                                    "offset": 5216
                                                },
                                                "end": {
                                                    "line": 189,
                                                    "column": 46,
                                                    "offset": 5235
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "SchemaDirectiveVisitor.visitSchemaDirectives",
                                            "position": {
                                                "start": {
                                                    "line": 189,
                                                    "column": 46,
                                                    "offset": 5235
                                                },
                                                "end": {
                                                    "line": 189,
                                                    "column": 92,
                                                    "offset": 5281
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ", passing in your schema and your directives, ",
                                            "position": {
                                                "start": {
                                                    "line": 189,
                                                    "column": 92,
                                                    "offset": 5281
                                                },
                                                "end": {
                                                    "line": 189,
                                                    "column": 138,
                                                    "offset": 5327
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "emphasis",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "before",
                                                    "position": {
                                                        "start": {
                                                            "line": 189,
                                                            "column": 139,
                                                            "offset": 5328
                                                        },
                                                        "end": {
                                                            "line": 189,
                                                            "column": 145,
                                                            "offset": 5334
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 189,
                                                    "column": 138,
                                                    "offset": 5327
                                                },
                                                "end": {
                                                    "line": 189,
                                                    "column": 146,
                                                    "offset": 5335
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " you provide your schema to the constructor of ",
                                            "position": {
                                                "start": {
                                                    "line": 189,
                                                    "column": 146,
                                                    "offset": 5335
                                                },
                                                "end": {
                                                    "line": 189,
                                                    "column": 193,
                                                    "offset": 5382
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "ApolloServer",
                                            "position": {
                                                "start": {
                                                    "line": 189,
                                                    "column": 193,
                                                    "offset": 5382
                                                },
                                                "end": {
                                                    "line": 189,
                                                    "column": 207,
                                                    "offset": 5396
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ":",
                                            "position": {
                                                "start": {
                                                    "line": 189,
                                                    "column": 207,
                                                    "offset": 5396
                                                },
                                                "end": {
                                                    "line": 189,
                                                    "column": 208,
                                                    "offset": 5397
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 189,
                                            "column": 1,
                                            "offset": 5190
                                        },
                                        "end": {
                                            "line": 189,
                                            "column": 208,
                                            "offset": 5397
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "code",
                                    "lang": "js",
                                    "meta": null,
                                    "value": "const { ApolloServer, gql, SchemaDirectiveVisitor } = require('apollo-server');\nconst { buildFederatedSchema } = require ('@apollo/federation')\n\n// typeDefs and resolvers defined here\n\nclass DeprecatedDirective extends SchemaDirectiveVisitor {\n  public visitFieldDefinition(field: GraphQLField<any, any>) {\n    field.isDeprecated = true;\n    field.deprecationReason = this.args.reason;\n  }\n}\n\nconst directives = {\n  deprecated: DeprecatedDirective\n};\nlet schema = buildFederatedSchema([{ typeDefs, resolvers }]);\n\nSchemaDirectiveVisitor.visitSchemaDirectives(schema, directives);\n\nconst server = new ApolloServer({\n  schema: schema\n});",
                                    "position": {
                                        "start": {
                                            "line": 191,
                                            "column": 1,
                                            "offset": 5399
                                        },
                                        "end": {
                                            "line": 214,
                                            "column": 4,
                                            "offset": 6044
                                        },
                                        "indent": [
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Also make sure to read about the ",
                                            "position": {
                                                "start": {
                                                    "line": 216,
                                                    "column": 1,
                                                    "offset": 6046
                                                },
                                                "end": {
                                                    "line": 216,
                                                    "column": 34,
                                                    "offset": 6079
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "link",
                                            "title": null,
                                            "url": "./gateway/#custom-directive-support",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "gateway's support for custom directives",
                                                    "position": {
                                                        "start": {
                                                            "line": 216,
                                                            "column": 35,
                                                            "offset": 6080
                                                        },
                                                        "end": {
                                                            "line": 216,
                                                            "column": 74,
                                                            "offset": 6119
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 216,
                                                    "column": 34,
                                                    "offset": 6079
                                                },
                                                "end": {
                                                    "line": 216,
                                                    "column": 112,
                                                    "offset": 6157
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": ".",
                                            "position": {
                                                "start": {
                                                    "line": 216,
                                                    "column": 112,
                                                    "offset": 6157
                                                },
                                                "end": {
                                                    "line": 216,
                                                    "column": 113,
                                                    "offset": 6158
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 216,
                                            "column": 1,
                                            "offset": 6046
                                        },
                                        "end": {
                                            "line": 216,
                                            "column": 113,
                                            "offset": 6158
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "heading",
                                    "depth": 2,
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Securing implementing services",
                                            "position": {
                                                "start": {
                                                    "line": 218,
                                                    "column": 4,
                                                    "offset": 6163
                                                },
                                                "end": {
                                                    "line": 218,
                                                    "column": 34,
                                                    "offset": 6193
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 218,
                                            "column": 1,
                                            "offset": 6160
                                        },
                                        "end": {
                                            "line": 218,
                                            "column": 34,
                                            "offset": 6193
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Because of the power and flexibility of Apollo Federation's ",
                                            "position": {
                                                "start": {
                                                    "line": 220,
                                                    "column": 1,
                                                    "offset": 6195
                                                },
                                                "end": {
                                                    "line": 220,
                                                    "column": 61,
                                                    "offset": 6255
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "inlineCode",
                                            "value": "_entities",
                                            "position": {
                                                "start": {
                                                    "line": 220,
                                                    "column": 61,
                                                    "offset": 6255
                                                },
                                                "end": {
                                                    "line": 220,
                                                    "column": 72,
                                                    "offset": 6266
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " field, your implementing services should ",
                                            "position": {
                                                "start": {
                                                    "line": 220,
                                                    "column": 72,
                                                    "offset": 6266
                                                },
                                                "end": {
                                                    "line": 220,
                                                    "column": 114,
                                                    "offset": 6308
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "strong",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "not",
                                                    "position": {
                                                        "start": {
                                                            "line": 220,
                                                            "column": 116,
                                                            "offset": 6310
                                                        },
                                                        "end": {
                                                            "line": 220,
                                                            "column": 119,
                                                            "offset": 6313
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 220,
                                                    "column": 114,
                                                    "offset": 6308
                                                },
                                                "end": {
                                                    "line": 220,
                                                    "column": 121,
                                                    "offset": 6315
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " be directly accessible by clients. Instead, only your ",
                                            "position": {
                                                "start": {
                                                    "line": 220,
                                                    "column": 121,
                                                    "offset": 6315
                                                },
                                                "end": {
                                                    "line": 220,
                                                    "column": 176,
                                                    "offset": 6370
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "link",
                                            "title": null,
                                            "url": "./gateway/",
                                            "children": [
                                                {
                                                    "type": "text",
                                                    "value": "gateway",
                                                    "position": {
                                                        "start": {
                                                            "line": 220,
                                                            "column": 177,
                                                            "offset": 6371
                                                        },
                                                        "end": {
                                                            "line": 220,
                                                            "column": 184,
                                                            "offset": 6378
                                                        },
                                                        "indent": []
                                                    }
                                                }
                                            ],
                                            "position": {
                                                "start": {
                                                    "line": 220,
                                                    "column": 176,
                                                    "offset": 6370
                                                },
                                                "end": {
                                                    "line": 220,
                                                    "column": 197,
                                                    "offset": 6391
                                                },
                                                "indent": []
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "value": " should have access to your implementing services. Clients then communicate with the gateway:",
                                            "position": {
                                                "start": {
                                                    "line": 220,
                                                    "column": 197,
                                                    "offset": 6391
                                                },
                                                "end": {
                                                    "line": 220,
                                                    "column": 290,
                                                    "offset": 6484
                                                },
                                                "indent": []
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 220,
                                            "column": 1,
                                            "offset": 6195
                                        },
                                        "end": {
                                            "line": 220,
                                            "column": 290,
                                            "offset": 6484
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "jsx",
                                    "value": "<FederationArchitecture />",
                                    "position": {
                                        "start": {
                                            "line": 222,
                                            "column": 1,
                                            "offset": 6486
                                        },
                                        "end": {
                                            "line": 222,
                                            "column": 27,
                                            "offset": 6512
                                        },
                                        "indent": []
                                    }
                                },
                                {
                                    "type": "paragraph",
                                    "children": [
                                        {
                                            "type": "text",
                                            "value": "Make sure to implement any necessary firewall rules, access control\nlists, or other measures to ensure that individual implementing services can\nbe accessed only via the gateway.",
                                            "position": {
                                                "start": {
                                                    "line": 224,
                                                    "column": 1,
                                                    "offset": 6514
                                                },
                                                "end": {
                                                    "line": 226,
                                                    "column": 34,
                                                    "offset": 6692
                                                },
                                                "indent": [
                                                    1,
                                                    1
                                                ]
                                            }
                                        }
                                    ],
                                    "position": {
                                        "start": {
                                            "line": 224,
                                            "column": 1,
                                            "offset": 6514
                                        },
                                        "end": {
                                            "line": 226,
                                            "column": 34,
                                            "offset": 6692
                                        },
                                        "indent": [
                                            1,
                                            1
                                        ]
                                    }
                                },
                                {
                                    "type": "export",
                                    "value": "export const _frontmatter = {\"title\":\"Implementing services (subgraphs)\"}",
                                    "position": {
                                        "start": {
                                            "line": 229,
                                            "column": 1,
                                            "offset": 6695
                                        },
                                        "end": {
                                            "line": 229,
                                            "column": 74,
                                            "offset": 6768
                                        },
                                        "indent": []
                                    }
                                }
                            ],
                            "position": {
                                "start": {
                                    "line": 1,
                                    "column": 1,
                                    "offset": 0
                                },
                                "end": {
                                    "line": 229,
                                    "column": 74,
                                    "offset": 6768
                                }
                            }
                        }
                    }
                }
            ]
        }
    }
}